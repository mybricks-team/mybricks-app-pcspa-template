!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__12__,__WEBPACK_EXTERNAL_MODULE__33__)=>(()=>{var __webpack_modules__={199:function(module,__unused_webpack_exports,__webpack_require__){var React=__webpack_require__(12),e;e=function(__WEBPACK_EXTERNAL_MODULE__359__){return function(){"use strict";var __webpack_modules__={356:function(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_399__){function __WEBPACK_DEFAULT_EXPORT__(_a){var data=_a.data,outputs=_a.outputs,inputs=_a.inputs,onError=_a.onError;inputs.from((function(val,relOutpus){var _a,script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){var fn=void 0,returnVal=void 0,isOk=void 0;try{eval("fn = ".concat(script)),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError("数据转换错误:".concat(e.message),e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_399__.d(__nested_webpack_exports__,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},359:function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_1055__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_1055__),n.exports}__nested_webpack_require_1055__.d=function(e,t){for(var n in t)__nested_webpack_require_1055__.o(t,n)&&!__nested_webpack_require_1055__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_1055__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_1055__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return function(){function e(t,n){void 0===n&&(n=[]);try{var o=Object.prototype.toString.call(t);if(null===t||"object"!=typeof t||o.startsWith("[object HTML")||"[object FormData]"===o)return t;var r=n.filter((function(e){return e.original===t}))[0];if(r)return r.copy;var i=Array.isArray(t)?[]:{};return n.push({original:t,copy:i}),Object.keys(t).forEach((function(o){i[o]=e(t[o],n)})),i}catch(e){return t}}__nested_webpack_require_1055__.r(__nested_webpack_exports__),__nested_webpack_require_1055__.d(__nested_webpack_exports__,{default:function(){return E}});var t=__nested_webpack_require_1055__(356);function n(e,t){var n=e.env,o=e.data,r=e.outputs;if(e.onError,void 0===t&&(t={}),o.connector)try{n.callConnector(o.connector,t,o.connectorConfig).then((function(e){r.then(e)})).catch((function(e){r.catch(e)}))}catch(e){console.error(e),r.catch("执行错误 ".concat(e.message||e))}else r.catch("没有选择接口")}var o=__nested_webpack_require_1055__(359),r=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},i=window.setInterval,s=window.clearInterval,c=window.setTimeout,l=window.clearTimeout,a=window,u=new WeakMap,d=new WeakMap,p=new WeakMap,f={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};function m(e){for(;e.trim().endsWith(";");)e=e.slice(0,e.length-1);return e}function v(){var e={};return Object.getOwnPropertyNames(a).forEach((function(t){var n=Object.getOwnPropertyDescriptor(a,t);if(n&&!n.configurable){var o=Object.prototype.hasOwnProperty.call(n,"get");"top"!==t&&"parent"!==t&&"self"!==t&&"window"!==t||(n.configurable=!0,o||(n.writable=!0)),Object.defineProperty(e,t,Object.freeze(n))}})),e}var g=function(){function e(e){void 0===e&&(e={});var t=this;this.hasDisposed=!1,this.fakeWindow=v(),this.timeoutList=[],this.intervalList=[],this.options={},this.options=e||{},this.proxy=new Proxy(window,{set:function(e,n,o){if(!t.hasDisposed)try{!t.fakeWindow.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(r=n,i=t.fakeWindow,(s=Object.getOwnPropertyDescriptor(window,r))&&s.writable&&Object.defineProperty(i,r,{configurable:s.configurable,enumerable:s.enumerable,writable:s.writable,value:s.value})),t.fakeWindow[n]=o}catch(e){throw console.error("set-key-error",n,e),e}var r,i,s;return!0},get:function(e,n){if(n===Symbol.unscopables)return f;if("window"===n||"self"===n)return t.proxy;if("document"!==n){if("hasOwnProperty"===n)return e.hasOwnProperty;if("eval"===n)return e.eval;if("location"===n)return e.location;try{var o=n in t.fakeWindow?t.fakeWindow[n]:e[n];return"function"!=typeof o||function(e){if(d.has(e))return d.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return d.set(e,t),t}(o)||function(e){if(u.has(e))return u.get(e);var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return u.set(e,t),t}(o)?o:(o=Function.prototype.bind.call(o,e),function(e,t){var n=p.get(t);if(n)return n;var o=Function.prototype.bind.call(t,e);for(var r in t)o[r]=t[r];return t.hasOwnProperty("prototype")&&!o.hasOwnProperty("prototype")&&(o.prototype=t.prototype),p.set(t,o),o}(window,o))}catch(e){throw console.error("get-key-error",n,e),e}}},has:function(e,n){return!t.options.module||"params"!==n&&"cb"!==n}}),this.proxy.setTimeout=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(t.hasDisposed)return 0;var s=c.apply(void 0,r([e,n],o,!1));return t.timeoutList.push(s),s},this.proxy.clearTimeout=function(e){var n=t.timeoutList.indexOf(e);return-1!==n&&t.timeoutList.splice(n,1),l(e)},this.proxy.setInterval=function(e,n){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t.hasDisposed)return 0;var c=i.apply(void 0,r([e,n],o,!1));return t.intervalList.push(c),c},this.proxy.clearInterval=function(e){var n=t.intervalList.indexOf(e);return-1!==n&&t.intervalList.splice(n,1),s(e)},a.proxy=this.proxy}return e.prototype.compile=function(e){if(this.hasDisposed)throw new Error("sandbox has been destroyed");var t,n=this.options.module;t=n?function(e){return e=m(e),"(\n                function(window, params, cb) {\n                    with(window) {\n                        return (".concat(e,")(...params, cb)\n                    }\n                }\n            )")}(e):function(e){return e=m(e),"(\n                function(window) {\n                    with(window){\n                        ".concat(e,"\n                    } \n                }\n            ).bind(window.proxy)\n        ")}(e);var o=a.eval("".concat(t,";//@ sourceURL=sandbox-code.js"));return{run:function(e,t){try{return n?o(window.proxy,e,t):o(window.proxy)}catch(e){throw console.error("js sandbox error occur:",e),e}}}},e.prototype.dispose=function(){this.timeoutList.forEach((function(e){window.clearTimeout(e)})),this.timeoutList=[],this.intervalList.forEach((function(e){return s(e)})),this.intervalList=[],this.fakeWindow=v(),this.options={},delete a.proxy,this.hasDisposed=!0},e}(),y=g,h=function(e){try{return decodeURIComponent(e)}catch(t){return e}},b=function(e){try{return encodeURIComponent(e)}catch(t){return e}};function _(e,t,n){var o,r,i=n||{},s=i.callback,c=void 0===s?function(){}:s,l=i.env,a=void 0===l?{}:l;if(!(null==a?void 0:a.toCode)&&!a.extractFns||!Number.isInteger(e)){var u,d;if("object"==typeof e&&null!==e&&(e=null!==(r=null==e?void 0:e.transformCode)&&void 0!==r?r:null==e?void 0:e.code),(null==e?void 0:e.includes("var%20_RTFN_"))||(e=I(e)),t&&t.length){d=new y({module:!0});var p=h(e);u=/export\s+default.*async.*function.*\(/g.test(p)?d.compile("".concat(p.replace(/export\s+default.*function.*\(/g,"async function _RT_("))):d.compile("".concat(p.replace(/export\s+default.*function.*\(/g,"function _RT_(")))}else u=(d=new y).compile("".concat(h(e)));return u.run(t,c),d}(o=a.extractFns)[e].apply(o,t)}var I=function(e){e=h(e);try{if(!window.Babel)throw Error("Babel was not found in window");var t=window.Babel.transform("_RTFN_ = ".concat(e," "),{presets:["env","typescript"],parserOpts:{strictMode:!1},comments:!1,filename:"types.d.ts"}).code;return t="(function() { var _RTFN_; \n".concat(t,"\n return _RTFN_; })()"),b(t)}catch(t){return console.error(t),b(e)}};function x(e){var t=[];return Object.keys(e).sort((function(e,t){var n,o;return+((null===(n=null==e?void 0:e.match(/\d+/g))||void 0===n?void 0:n[0])||0)-+((null===(o=null==t?void 0:t.match(/\d+/g))||void 0===o?void 0:o[0])||0)})).forEach((function(n){t.push(e[n])})),t}var w=function(){return w=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},w.apply(this,arguments)},E={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[{namespace:"mybricks.core-comlib.fn",version:"1.0.0",runtime:function(e){e.inputs,e.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.var",version:"1.0.0",runtime:function(t){t.env;var n=t.data,o=t.outputs,r=t.inputs,i=t._notifyBindings;r.get((function(t,o){var r=e(void 0!==n.val?n.val:n.initValue);o.return(r)})),r.set((function(t,r){n.val=t;var s=e(t);o.changed(s,!0),i(s),r.return(s)})),r.reset((function(){var t=n.initValue;n.val=t;var r=e(t);o.changed(r,!0),i(r)}))},data:{},inputs:["get","set","reset"],outputs:["return","changed"]},{namespace:"mybricks.core-comlib.type-change",version:"1.0.0",runtime:t.Z,data:{},inputs:["from"],outputs:["to"]},{namespace:"mybricks.core-comlib.connector",version:"1.0.0",runtime:function(e){var t=e.env,o=e.data,r=e.inputs,i=e.outputs,s=e.onError;t.runtime&&(o.immediate?n({env:t,data:o,outputs:i}):r.call((function(e){n({env:t,data:o,outputs:i,onError:s},e)})))},data:{},inputs:["call"],outputs:["then","catch"]},{namespace:"mybricks.core-comlib.frame-input",version:"1.0.0",runtime:function(e){var t=e.env,n=e.inputs;t.runtime&&n.getCurValue((function(e,t){t.return(e)}))},data:{},inputs:["getCurValue"],outputs:["return"]},{namespace:"mybricks.core-comlib.scenes",version:"1.0.0",runtime:function(e){var t=e.env,n=e.data,o=e.inputs,r=(e._inputs,e._inputsCallable);o[n._pinId||"open"]((function(e){n._pinId&&"open"!==n._pinId?r[n._pinId](e):(t.canvas.open(n._sceneId,e,"popup"===n._sceneShowType?null:n.openType),r._open(e))}))},data:{_sceneId:null,_sceneShowType:null,openType:"blank"},inputs:["open"],outputs:[]},{namespace:"mybricks.core-comlib.module",version:"1.0.0",runtime:function(e){e.id;var t=e._id,n=e.env,r=e.data,i=e.style,s=e.inputs,c=e.outputs,l=(0,o.useState)(),a=l[0],u=l[1],d=(0,o.useMemo)((function(){var e=n.getModuleJSON(r.definedId);return n.renderModule(e,{ref:function(t){if(u(t),n.edit){var o=t.style;o&&(i.widthAuto=o.widthAuto,i.widthFull=o.widthFull,i.heightAuto=o.heightAuto,i.heightFull=o.heightFull)}if(n.runtime){var l=e.inputs,a=e.outputs,d=e.pinRels,p={},f={};Object.entries(d).forEach((function(e){var t=e[0],n=e[1],o=t.split("_rootFrame_-")[1];if(o){var r=n[0];p[o]=r,f[r]=!0}}));var m=r.configs;for(var v in m)t.inputs[v](m[v]);a.forEach((function(e){var n=e.id;f[n]||t.outputs(n,c[n])})),l.forEach((function(e){var n=e.id;s[n]((function(e,o){var r=p[n];r&&t.outputs(r,(function(e){o[r](e)})),t.inputs[n](e)}))}))}t.run()},disableAutoRun:!0,outputs:c,rootId:t})}),[]);return(0,o.useMemo)((function(){if(a&&n.edit){var e=r.configs;for(var t in e)a.inputs[t](e[t])}}),[r.configs,a]),d},data:{},inputs:["show","hide","showOrHide"],outputs:["click"]},{namespace:"mybricks.core-comlib.group",version:"1.0.0",runtime:function(e){var t=e.slots,n=e.outputs,r=(0,o.useCallback)((function(){n.click()}),[]),i=(0,o.useCallback)((function(){n.dblClick()}),[]);return React.createElement("div",{style:{width:"100%",height:"100%"},onClick:r,onDoubleClick:i},t.content.render())},data:{},inputs:["show","hide","showOrHide"],outputs:["click","dblClick"]},{namespace:"mybricks.core-comlib.service",version:"1.0.0",runtime:function(e){e.inputs,e.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.frame-output",version:"1.0.0",runtime:function(e){var t=e.env,n=(e.data,e.inputs);e.outputs,t.runtime&&n.output((function(e){}))},data:{},inputs:["output"],outputs:[]},{namespace:"mybricks.core-comlib.js-ai",version:"1.0.0",runtime:function(e){var t,n,o=e.env,r=e.data,i=e.inputs,s=e.outputs,c=e.logger,l=e.onError,a=r.fns,u=r.runImmediate,d={outputs:x(s)};try{u&&o.runtime&&(n=_(a,[d],{env:o})),i.input((function(e){try{n=_(a,[w(w({},d),{inputs:x(e)})],{env:o})}catch(e){null==l||l(e),console.error("js计算组件运行错误.",e),c.error("".concat(e))}})),"function"==typeof(null===(t=null==o?void 0:o.runtime)||void 0===t?void 0:t.onComplete)&&o.runtime.onComplete((function(){null==n||n.dispose()}))}catch(e){null==l||l(e),console.error("js计算组件运行错误.",e),c.error("".concat(e))}},data:{},inputs:["input"],outputs:["output0"]},{namespace:"mybricks.core-comlib.domain",version:"1.0.0",runtime:function(e){var t=e.env,n=e.data;e.inputs.call((function(e,o){n.model?t.callDomainModel?t.callDomainModel({model:n.model,params:e,configs:{callType:"call"}},(function(e,t,n){t||(e?o.catch(e):o.then(n))})):o.catch("未实现env.callDomainModel"):o.catch("没有选择领域模型")}))},data:{},inputs:["call"],outputs:["then","catch"]}]}}(),__nested_webpack_exports__}()},module.exports=e(__webpack_require__(12))},421:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(574),r=n.n(o),i=n(703),s=n.n(i)()(r());s.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),s.locals={error:"error-c0f46"};const c=s},414:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(574),r=n.n(o),i=n(703),s=n.n(i)()(r());s.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),s.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const c=s},100:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(574),r=n.n(o),i=n(703),s=n.n(i)()(r());s.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),s.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const c=s},575:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(574),r=n.n(o),i=n(703),s=n.n(i)()(r());s.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n  min-height: 0;\n}\n.comHeightAuto-f7f16 > div {\n  flex: 1;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),s.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",comHeightAuto:"comHeightAuto-f7f16",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const c=s},123:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(574),r=n.n(o),i=n(703),s=n.n(i)()(r());s.push([e.id,".debugger-fed31 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-fed31 .titlebar-f7fe6 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 svg path {\n  fill: #FA6400;\n}\n",""]),s.locals={debugger:"debugger-fed31",titlebar:"titlebar-f7fe6",resume:"resume-ebcb6"};const c=s},703:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(s[l]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);o&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},574:e=>{"use strict";e.exports=function(e){return e[1]}},263:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(241),r=n.n(o),i=n(630),s=n.n(i),c=n(89),l=n.n(c),a=n(237),u=n.n(a),d=n(994),p=n.n(d),f=n(421),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var v,g=0,y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(v=r()(f.A,y)),m},m.unuse=function(){g>0&&! --g&&(v(),v=null)};const h=m},984:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(241),r=n.n(o),i=n(630),s=n.n(i),c=n(89),l=n.n(c),a=n(237),u=n.n(a),d=n(994),p=n.n(d),f=n(414),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var v,g=0,y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(v=r()(f.A,y)),m},m.unuse=function(){g>0&&! --g&&(v(),v=null)};const h=m},498:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(241),r=n.n(o),i=n(630),s=n.n(i),c=n(89),l=n.n(c),a=n(237),u=n.n(a),d=n(994),p=n.n(d),f=n(100),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var v,g=0,y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(v=r()(f.A,y)),m},m.unuse=function(){g>0&&! --g&&(v(),v=null)};const h=m},145:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(241),r=n.n(o),i=n(630),s=n.n(i),c=n(89),l=n.n(c),a=n(237),u=n.n(a),d=n(994),p=n.n(d),f=n(575),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var v,g=0,y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(v=r()(f.A,y)),m},m.unuse=function(){g>0&&! --g&&(v(),v=null)};const h=m},913:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var o=n(241),r=n.n(o),i=n(630),s=n.n(i),c=n(89),l=n.n(c),a=n(237),u=n.n(a),d=n(994),p=n.n(d),f=n(123),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var v,g=0,y={};y.styleTagTransform=p(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(v=r()(f.A,y)),m},m.unuse=function(){g>0&&! --g&&(v(),v=null)};const h=m},241:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],c=0;c<e.length;c++){var l=e[c],a=o.base?l[0]+o.base:l[0],u=i[a]||0,d="".concat(a," ").concat(u);i[a]=u+1;var p=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,o);o.byIndex=c,t.splice(c,0,{identifier:d,updater:m,references:1})}s.push(d)}return s}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var c=n(i[s]);t[c].references--}for(var l=o(e,r),a=0;a<i.length;a++){var u=n(i[a]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},237:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},89:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},630:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},994:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},997:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,g:()=>d});var o=n(524),r=n(615),i=n(713),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((o=o.apply(e,t||[])).next())}))};const c="_rootFrame_",l={"mybricks.core-comlib.bus-getUser":{name:"bus-getUser",pinId:"call"}},a=e=>`未找到组件(${e.namespace}@${e.version})定义`;function u(e,t={}){const{observable:n=e=>e}=t,{json:p,getComDef:f,env:m,_env:v,ref:g,onError:y=()=>{},logger:h=console,debug:b,debugLogger:_,_isNestedRender:I,_isNestCom:x,_isModuleCom:w,_context:E,_getComProps:C,_getSlotValue:O,_frameId:j,_getSlotPropsMap:S,_getScopeInputTodoMap:k,rootId:A}=e,P=e.scenesOperate||m.scenesOperate,{_v:R,id:$,slot:T,coms:F={},comsAutoRun:M={},cons:N=[],pinRels:D={},pinProxies:B={},pinValueProxies:L={},type:V}=p;let K=F;"2024-diff"===R&&(K=(0,r.C6)(F,{get(e,t){var n;const o=e[t];if(!o||o._ready)return o;const{def:i}=o;o._ready=!0;const s=f(i),c=o.model,l=c.data;return c.data=l?Object.assign((0,r.y_)(s.data),l):(0,r.y_)(s.data),(null===(n=i.rtType)||void 0===n?void 0:n.match(/^js/gi))||(o.inputs=s.inputs.concat(c.inputAry),o.outputs=s.outputs.concat(c.outputAry)),o}}));const W=m,J={},U={},q={},H={},z={};Object.keys(N).forEach((e=>{const t=N[e],{startPinParentKey:n}=t[0];n&&(z[n]=e)}));const G={},X={},Y={},Z={},Q={},ee={},te={},ne={},oe={},re=new d;function ie(e,t,n){if(!x)if("com"===e){const{com:e,pinHostId:i,val:s,fromCon:c,notifyAll:l,comDef:a,conId:u}=t;if(w)return void _("info",(0,o.Ml)(e.title,a,i,s));_?_("com","output",{id:e.id,pinHostId:i,val:(0,r.eq)(s),fromCon:c,notifyAll:l,comDef:a,sceneId:p.id,conId:u},n):(0,o.$)(e.title,a,i,s)}else if("frame"===e){const{comId:e,frameId:o,pinHostId:i,val:s,sceneId:c,conId:l}=t;_&&_("frame","output",{comId:e,frameId:o,pinHostId:i,val:(0,r.eq)(s),sceneId:c||p.id,conId:l},n)}}function se(e,t){if(x)return;const{com:n,pinHostId:i,val:s,frameKey:c,finishPinParentKey:l,comDef:a,conId:u}=e;if(u){if(w)return void _("info",(0,o.iI)(n.title,a,i,s));_?_("com","input",{id:n.id,pinHostId:i,val:(0,r.eq)(s),frameKey:c,finishPinParentKey:l,comDef:a,sceneId:p.id,conId:u},t):(0,o.sK)(n.title,a,i,s)}}function ce(n,o,i,s){var a,d,f;let m=B[n.comId+"-"+n.pinId],v=n;if(n.def&&"mybricks.core-comlib.scenes"===n.def.namespace&&n.frameId!==p.id&&(m=null),m){if("myFrame"===m.type){const e=S?S(`${n.comId}-${m.frameId}`):J[`${n.comId}-${m.frameId}`];if(e){const t=Object.entries(e).filter((([e,t])=>{if("slot"===e)return!0;const{curScope:o}=t;return!(!o||o.parentComId!==n.comId)}));if(1===t.length){const e=t[0][1];if(e.curScope)e.inputs[m.pinId](i);else{const e=k?k():oe;e[`${n.comId}-${m.frameId}`]?e[`${n.comId}-${m.frameId}`].push({pinId:m.pinId,value:i}):e[`${n.comId}-${m.frameId}`]=[{pinId:m.pinId,value:i}]}}else{const e=t.length>1;t.forEach((([t,o])=>{if("slot"===t&&e)return;const{curScope:r}=o;r&&r.parentComId===n.comId&&o.inputs[m.pinId](i)}))}}else{const e=k?k():oe;e[`${n.comId}-${m.frameId}`]?e[`${n.comId}-${m.frameId}`].push({pinId:m.pinId,value:i}):e[`${n.comId}-${m.frameId}`]=[{pinId:m.pinId,value:i}]}return}const l="mybricks.core-comlib.frame-output"===(null===(a=v.def)||void 0===a?void 0:a.namespace);if(l)v=Object.assign(Object.assign({},n),{type:m.type,frameId:m.frameId,pinId:m.pinId,direction:"inner-input",comId:(n.targetFrameKey||n.frameKey).split("-")[0]});else{if(s&&s.finishPinParentKey!==v.startPinParentKey)return;if("frame"===m.type){if("mybricks.core-comlib.fn"===v.def.namespace){const{frameId:n,comId:r,pinId:s}=m;if(N[(r?`${r}-${n}`:`${n}`)+"-"+s])u(Object.assign(Object.assign({},e),{_getComProps:e=>de(e,o),_getSlotValue:e=>pe(e,o),_getSlotPropsMap:e=>S?S(e):J[e],_getScopeInputTodoMap:()=>k?k():oe,_frameId:n,ref:e=>{const t=e.getComInfo(v.comId),{configs:n}=t.model.data,{frameId:r,pinId:s}=m,c=t.outputs,l=null;if(null==c?void 0:c.length){const t=de(v.comId,o);c.forEach((n=>{e.outputs(n,(e=>{const r=t.outputs[n];r&&r(e,o)}))}))}n&&Object.entries(n).forEach((([t,n])=>{e.inputs[t](n,void 0,!0,r,l)})),e.inputs[s](i,void 0,!0,r,l),e.run(r,l)}}),t);else if(ie("frame",{comId:r,frameId:n,pinHostId:s,val:i,sceneId:null}),n!==c)if(p.id===n)H[s](i);else{const e=de(v.comId,o);null==P||P.open({frameId:n,todo:{pinId:s,value:i},comProps:e,parentScope:e})}return}const n=de(v.comId,o);let s;return s={id:(0,r.uR)(10,16),frameId:m.frameId,parent:o,proxyComProps:n},ye({options:m,value:i,scope:s,comProps:n}),void(l||ge({frameId:m.frameId,scope:s}))}Y[`${m.frameId}-${m.pinId}`]=i}}if("com"===v.type){if("mybricks.core-comlib.bus-getUser"===v.def.namespace){const e=de(v.comId,o),t=l[v.def.namespace];return void(null==P||P.open({busName:t.name,todo:{pinId:t.pinId,value:i},comProps:e,parentScope:e}))}s?s.finishPinParentKey===v.startPinParentKey&&fe(v,i,o):fe(v,i,o)}else if("frame"===v.type){if(s&&s.finishPinParentKey!==v.startPinParentKey)return;if(v.comId&&(null==m?void 0:m.frameId)!==$){if("inner-input"===v.direction){const e=U[v.comId+"-"+v.frameId+"-"+((null==o?void 0:o.id)?o.id+"-":"")+v.pinId]||U[v.comId+"-"+v.frameId+"-"+((null===(d=null==o?void 0:o.parent)||void 0===d?void 0:d.id)?o.parent.id+"-":"")+v.pinId]||U[v.frameKey+"-"+v.pinId];e?e(i):console.log("未找到proxyFn: ",v)}else if("inner-output"===v.direction&&"joint"===v.pinType){const e=N[v.comId+"-"+v.frameId+"-"+v.pinId];e&&le({logProps:null,cons:e,val:i})}}else{const e=null==o?void 0:o.proxyComProps;if(e){const t=e.outputs[v.pinId];if(t)return void t(i,o.parent)}null===(f=H[v.pinId])||void 0===f||f.call(H,i)}}else{if("extension"!==v.type)throw new Error("尚未实现");null==P||P.callExtension(Object.assign(Object.assign({},m),{value:i}))}}function le({logProps:e,cons:t,val:n,curScope:o,fromCon:r,notifyAll:l,fromCom:a,isAutoRun:u}){!x&&b&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>s(this,void 0,void 0,(function*(){var s,d;const{comId:p,pinId:f,pinType:m,timerPinInputId:v,frameKey:g}=t,y=K[p];if(r){if(r.finishPinParentKey!==t.startPinParentKey)return}else if(!(0,i.i)(a,t,e))return;if(x||!b||!t.isIgnored){if(!x&&b&&(null===(s=E.debuggerPanel)||void 0===s?void 0:s.hasBreakpoint(t))){let n=!0;yield null===(d=E.debuggerPanel)||void 0===d?void 0:d.wait(t,(()=>{n=!1,e&&(e[1].conId=t.id,e&&ie(...e,!0))})),n&&e&&(e[1].conId=t.id,e&&ie(...e))}else e&&ie(...e);if("timer"===m)ae({value:n,curScope:o,inReg:t,notifyAll:l,fromCon:r});else if(l){const e=t.frameKey;if(e===c||u)ue({pinId:f,value:n,component:y,curScope:null,comId:p,val:n,timerPinInputId:v,frameKey:e,inReg:t,notifyAll:l,fromCon:r});else{const[i,s]=e.split("-");if(Z[e]){const n=Z[e],o=n[a.id];o?o[t.id]=t:n[a.id]={[t.id]:t}}else{(Z[e]={})[a.id]={[t.id]:t}}if(a.parentComId)ue({pinId:f,value:n,component:y,curScope:o,comId:i,val:n,timerPinInputId:v,frameKey:e,inReg:t,notifyAll:l,fromCon:r});else{const o=J[`${i}-${s}`];if(o){const s=Object.entries(o),c=s.length;s.forEach((([o,s])=>{c>1&&"slot"===o||("scope"===(null==s?void 0:s.type)?s.curScope?ue({pinId:f,value:n,component:y,curScope:s.curScope,comId:i,val:n,timerPinInputId:v,frameKey:e,inReg:t,notifyAll:l,fromCon:r}):s.pushTodo((o=>{ue({pinId:f,value:n,component:y,curScope:o,comId:i,val:n,timerPinInputId:v,frameKey:e,inReg:t,notifyAll:l,fromCon:r})})):ue({pinId:f,value:n,component:y,curScope:s.curScope,comId:i,val:n,timerPinInputId:v,frameKey:e,inReg:t,notifyAll:l,fromCon:r}))}))}}}}else ue({pinId:f,value:n,component:y,curScope:o,comId:p,val:n,timerPinInputId:v,frameKey:g,inReg:t,notifyAll:l,fromCon:r})}}))))}function ae({pinId:e,value:t,curScope:n,inReg:o,notifyAll:r,fromCon:i}){let s=n;const l=e?Object.assign(Object.assign({},o),{pinId:e}):o;if(r){const e=l.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");ce(l,e===c?{}:n,t,i)}else{const e=l.frameKey.split("-");if(e.length>=2&&!s){const n=ve(e[0],e[1],null,!1);"scope"===(null==n?void 0:n.type)?n.curScope?ce(l,n.curScope,t,i):n.pushTodo((e=>{ce(l,e,t,i)})):ce(l,s,t,i)}else ce(l,s,t,i)}}function ue({pinId:e,value:t,component:n,curScope:o,comId:r,val:i,timerPinInputId:s,frameKey:c,inReg:l,notifyAll:a,fromCon:u}){const{isReady:d,isMultipleInput:p,pinId:f,value:m,cb:v}=function({pinId:e,value:t,component:n,curScope:o,comId:r,val:i}){const s=e.indexOf("."),c={pinId:e,value:t,isReady:!0,isMultipleInput:!1,cb:null};if(n&&-1!==s){const t=n.id+""+((null==o?void 0:o.id)?`-${o.id}`:""),{inputs:r}=n,l=e.substring(0,s);c.pinId=l;const a=e.substring(s+1);let u=G[t];u||(u=G[t]={}),u[a]=i;const d=new RegExp(`${l}.`),p=r.filter((e=>!!e.match(d)));Object.keys(u).length===p.length?(c.value=u,c.isMultipleInput=!0,c.cb=()=>{Reflect.deleteProperty(G,t)}):c.isReady=!1}return c}({pinId:e,value:t,component:n,curScope:o,comId:r,val:i});if(d){const e={pinId:p?f:null,value:m,curScope:o,inReg:l,notifyAll:a,fromCon:u};if(s){const t=s+"-"+c+((null==o?void 0:o.id)?`-${o.id}`:""),n=X[t];if(n){const{ready:o,todo:r}=n;if(o){let n=!1;Object.entries(r).forEach((([t,o])=>{t===f?(ae(e),n=!0):o()})),n||ae(e),null==v||v(),Reflect.deleteProperty(X,t)}else r[f]=()=>{null==v||v(),ae(e)}}else X[t]={ready:!1,todo:{[f]:()=>{null==v||v(),ae(e)}}}}else null==v||v(),ae(e)}}function de(e,t,o){var i,s,l;const u=K[e];if(!u)return null;const d=u.def,p=null===(i=d.rtType)||void 0===i?void 0:i.match(/^js/gi);if(C&&!p&&!o||C&&"mybricks.core-comlib.var"===d.namespace&&!o)return C(e);const v=e+(u.frameId||c);let g,_=J[v];_||(_=J[v]={});let I,x=t;for(!x&&u.parentComId&&u.frameId&&(x=null===(l=null===(s=J[`${u.parentComId}-${u.frameId}`])||void 0===s?void 0:s.slot)||void 0===l?void 0:l.curScope);x;){x.dynamicId&&(I=x.dynamicId);const t=x.id+"-"+e;if(x.frameId===u.frameId){g=x.id;const n=I?_[`${g}-${I}-${e}`]:_[t];if(n)return n;{const e=x.parentComId;if(!e)break;if(e===u.paramId||e===u.parentComId)break}}x=x.parent}const w=(g?g+"-":"")+e;if(g){(ne[g]||(ne[g]={}))[v]=w}const E=_[w];if(E)return E;const O=u.model,j=JSON.parse(JSON.stringify(O.data)),S=JSON.parse(JSON.stringify(O.style));S.__model_style__=!0;const k={},A={},R={},$={},T=function(e){return(0,r.C6)({},{ownKeys:e=>u.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}k[n]=t;const i=A[n];i&&(i.forEach((({val:e,fromCon:n,fromScope:o,next:i})=>{t(e,(0,r.C6)({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const r=i||V()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,o||x,n,!1,t)}}))})),A[n]=void 0)}})},M=(0,r.C6)({},{get:(n,o)=>function(n){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=D[e+"-"+o];if(r){const i={},s={};return r.forEach((e=>{i[e]=t=>{s[e]=t}})),Promise.resolve().then((()=>{fe({comId:e,def:d,pinId:o},n,t,s)})),i}fe({comId:e,def:d,pinId:o},n,t)}}),L=(0,r.C6)({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=B[e+"-"+n];o&&(null==P||P.inputs(Object.assign(Object.assign({},o),{value:t,parentScope:H})))}}),V=function(n){return(0,r.C6)({},{ownKeys:e=>u.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(o,r,i){const s=function(o,i,s,c){if("[object Symbol]"===Object.prototype.toString.call(r))return;const l="boolean"==typeof i&&i;if(l){if(u.parentComId){const t=`${u.parentComId}-${u.frameId}`;ee[t]?ee[t][e]=!0:ee[t]={[e]:!0}}if(Q[`${u.id}${(null==t?void 0:t.id)?`-${t.id}`:""}`]=o,u.global&&!c)return void(null==P||P.exeGlobalCom({com:u,value:o,pinId:r}))}const p=arguments,v=null==n?void 0:n.outputs;if(v){const e=v[r];"function"==typeof e&&e(o)}let g;i&&"object"==typeof i&&(g=i);const h=f(d);if(!h)return void y(a(d));const b=O.outputEvents;let _;if(b){const t=b[r];if(t&&Array.isArray(t)){const n=t.find((e=>e.active));if(n){const{type:t}=n;switch(t){case"none":_=[];break;case"fx":const i=B[e+"-"+r];if("frame"===(null==i?void 0:i.type)){const e=`${i.frameId}-${i.pinId}`;_=N[e]||[],Y[e]=o}else _=[];break;case"defined":break;default:if(_=[],Array.isArray(null==m?void 0:m.events)){const e=m.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:n.options})}}}}}_=_||N[e+"-"+r],(null==_?void 0:_.length)?le(p.length>=3&&void 0===c?{logProps:["com",{com:u,pinHostId:r,val:o,fromCon:s,notifyAll:l,comDef:h}],cons:_,val:o,curScope:g,fromCon:s,fromCom:u}:{logProps:["com",{com:u,pinHostId:r,val:o,fromCon:s,notifyAll:l,comDef:h}],cons:_,val:o,curScope:g||t,fromCon:s,notifyAll:l,fromCom:u}):ie("com",{com:u,pinHostId:r,val:o,fromCon:s,notifyAll:l,comDef:h})};return s.getConnections=()=>N[e+"-"+r]||[],s}})},W=(0,r.C6)({},{get:(e,t,n)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;R[t]=e;const n=$[t];n&&(n.forEach((t=>{e(t)})),$[t]=void 0)}}),U=(0,r.C6)({},{get:(n,o,r)=>function(n){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=N[e+"-"+o];r?le({logProps:["com",{com:u,pinHostId:o,val:n,comDef:d}],cons:r,val:n,curScope:t}):ie("com",{com:u,pinHostId:o,val:n,comDef:d})}});let q=new Set,H={id:u.id,title:u.title,frameId:u.frameId,parentComId:u.parentComId,data:p?j:n(j),style:p?S:n(S),_inputRegs:k,scopeId:g,addInputTodo:(e,t,n,o,r)=>{let i=A[e];i||(A[e]=i=[]),i.push({val:t,fromCon:n,fromScope:o,next:r})},inputs:T(),inputsCallable:M,_inputsCallable:L,outputs:V(),_inputs:W,_outputs:U,clone(e){const t={inputs:T(e),outputs:V(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){u.global?null==P||P.var.changed({com:u,value:e}):re.changed({com:u,value:e})},logger:h,destroy:()=>{H=null,q.forEach((({id:e,callBack:t,global:n})=>{n?null==P||P.var.destroy(e,t):re.destroy(e,t)}))},onError:b?t=>{y({comId:e,error:t,title:u.title})}:e=>{y(e,{id:u.id,title:u.title,frameId:u.frameId,parentComId:u.parentComId})}};_[w]=H;const{bindingsFrom:z}=u.model;return z&&Object.entries(z).forEach((([e,t])=>{const n=t=>{let n=H;const o=e.split(".");o.forEach(((e,r)=>{r!==o.length-1?n=n[e]:n[e]=t}))};F[t].global?(q.add({id:t,callBack:n,global:!0}),null==P||P.var.regist(t,n)):(q.add({id:t,callBack:n}),re.regist(t,n))})),H}function pe(e,t){let n=Y[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===n&&(null==t?void 0:t.parent)&&(n=pe(e,t.parent)),void 0===n&&!(null==t?void 0:t.parent)&&O&&(n=O(e,t)),(0,r.y_)(n)}function fe(e,t,n,o){var i,s,l;const{comId:u,def:d,pinId:m,pinType:g,frameKey:b,finishPinParentKey:_,timerPinInputId:I,targetFrameKey:w}=e;if("ext"===g){const o=J[u]||de(u,n);if("_setStyle"===m){const{scopeId:e}=o,n=A?e?`${A}-${e}-${u}`:`${A}-${u}`:e?`${e}-${u}`:u;null===(s=null===(i=null==E?void 0:E.options)||void 0===i?void 0:i.stylization)||void 0===s||s.setStyle(n,t)}else{const e=o.style;let n=e.display;"show"===m?n="":"hide"===m?n="none":"showOrHide"===m&&(n=void 0===t?"none"===n?"":"none":t?"":"none"),e.display=n}const r=f(d);if(!r)return void y(a(d));se({com:o,val:t,pinHostId:m,frameKey:b,finishPinParentKey:_,comDef:r,conId:e.id})}else if("config"===g){const o=de(u,n),r=f(d);if(!r)return void y(a(d));se({com:o,pinHostId:m,val:t,frameKey:b,finishPinParentKey:_,comDef:r,conId:e.id});const{extBinding:i}=e,s=i.split(".");let c=o;s.forEach(((e,n)=>{n!==s.length-1?c=c[e]:c[e]=t}))}else if("timer"===g){const o=de(u,n),r=f(d);if(!r)return void y(a(d));se({com:o,pinHostId:m,val:t,frameKey:b,finishPinParentKey:_,comDef:r,conId:e.id});const i=I+"-"+b+((null==n?void 0:n.id)?`-${n.id}`:""),s=X[i];if(s){const{todo:e}=s;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(X,i)}else X[i]={ready:!0,todo:{}}}else if(null===(l=d.rtType)||void 0===l?void 0:l.match(/^js/gi)){const o=K[u];if(o){const i=de(u,n),s=f(d);if(!s)return void y(a(d));if(o.global){const e=null==P?void 0:P.getGlobalComProps(u);e&&(i.data.val=e.data.val)}const l=null==n?void 0:n.id,g=(l?l+"-":"")+u;o.inputs.find((e=>e===m))?se({com:o,val:t,pinHostId:m,frameKey:b,finishPinParentKey:_,comDef:s,conId:e.id}):Object.entries(t).forEach((([t,n])=>{se({com:o,val:n,pinHostId:`${m}.${t}`,frameKey:b,finishPinParentKey:_,comDef:s,conId:e.id})})),q[g]||(q[g]=!0,s.runtime({id:u,_id:x?null:u,env:W,_env:v,data:i.data,inputs:i.inputs,outputs:i.outputs,_notifyBindings:i._notifyBindings,_inputsCallable:i._inputsCallable,logger:h,onError:i.onError}));const I=i._inputRegs[m];"function"==typeof I?I((0,r.y_)(t),(0,r.C6)({},{get:(t,o)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(o)){if(L){const e=L[`${u}-${m}`];if(e){const o=e.frameId,r=`${o===p.id?c:w||b}-${e.pinId}`,i=o===j?pe:O||pe;void 0===(t=i(r,n))&&(t=i(r,null))}}if(C){de(u,n,!0).outputs[o](t,n,e)}else i.outputs[o](t,n,e)}}})):(console.log("计算组件的addInputTodo: ",d),i.addInputTodo(m,(0,r.y_)(t),e,n))}}else{const i=de(u,n);if(!i)return;const s=f(d);if(!s)return void y(a(d));se({com:i,pinHostId:m,val:t,frameKey:b,finishPinParentKey:_,comDef:s,conId:e.id});const c=i._inputRegs[m];if("function"==typeof c){let s;s=o||(0,r.C6)({},{get:(t,o)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(o))if(C){de(u,n,!0).outputs[o](t,n,e)}else i.outputs[o](t,n,e)}}),c((0,r.y_)(t),s)}else i.addInputTodo(m,(0,r.y_)(t),e,n,C?(t,o,r,i,s)=>{de(u,n,!0).outputs[s](t,n,e)}:null)}if(_){const e=N[z[_]];e&&!D[`${u}-${m}`]&&le({logProps:null,cons:e,val:void 0})}}function me(e,t){let n;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return n=e,e;if(e.slots)for(let o in e.slots)if(n=me(e.slots[o],t),n)return n})),n}function ve(e,t,n,o){var i;const s="string"!=typeof t,c=s?t.id:t,l=`${e}-${c}`;let a=J[l];a||(a=J[l]={});let u=n?n.id:"slot",d=a[u];if(o&&!d&&console.log("不应该再走到这儿了: ",{comId:e,slotId:c,scope:n,notifyAll:o}),!d){let o=s?t:te[`${e}-${c}`];if(!o){const t=me(T,e);if(!(null==t?void 0:t.slots))return null;o=null==t?void 0:t.slots[c]}const p={};let f;if(n){const t=J[e+"-"+c];t&&(f=t.todo)}const m={scope:n,todo:f},v=(0,r.C6)({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(p[t]=e)}}),g=new Set,y=(0,r.C6)({},{get(t,n){const o=function(t,o){if("[object Symbol]"===Object.prototype.toString.call(n))return;let r=o||m.scope;const i=e+"-"+c+"-"+n,s=N[i],l=`${i}${r?`-${r.id}-${r.frameId}`:""}`;g.add(l),Y[l]=t,s?le({logProps:["frame",{comId:e,frameId:c,pinHostId:n,val:t}],cons:s,val:t,curScope:r}):ie("frame",{comId:e,frameId:c,pinHostId:n,val:t})};return o.getConnections=()=>N[e+"-"+c+"-"+n]||[],o}}),h=(0,r.C6)({},{get:(t,o,r)=>function(t){var r;"[object Symbol]"!==Object.prototype.toString.call(o)&&(U[`${e}-${c}-${null==n?void 0:n.id}-${o}`]=t,U[`${e}-${c}-${null===(r=null==n?void 0:n.parent)||void 0===r?void 0:r.id}-${o}`]=t,U[u+"-"+o]=t,U[l+"-"+o]=t)}});let b={};if(d=a[u]={type:null==o?void 0:o.type,run(t,n){let o=m.scope;if(t&&o!==t&&(m.scope=t,o=t),n){if(!o)return;const t=oe[`${e}-${o.frameId}`];if(Array.isArray(t))t.forEach((({pinId:e,value:t})=>{d.inputs[e](t)}));else if(t){const{pinId:e,value:n}=t;d.inputs[e](n)}return}const r=(null==o?void 0:o.id)||"none";if(b[r]||(b[r]=!0,ge({comId:e,frameId:c,scope:o})),Array.isArray(m.todo)&&(m.todo.forEach((e=>{Promise.resolve().then((()=>{e(o)}))})),m.todo=void 0),o&&"slot"!==u){const t=Z[`${e}-${c}`];Promise.resolve().then((()=>{t&&Object.entries(t).forEach((([e,t])=>{if(!K[e].parentComId){const n=Object.entries(t).map((([e,t])=>t));n.length&&le({logProps:null,cons:n,val:Q[e],curScope:o,notifyAll:!0,fromCom:K[e],isAutoRun:!0})}}))}))}},destroy(){if(n){let t=!1;const o=n.parent;if(o&&ne[o.id]||(t=!0),t){const e=ne[n.id];e&&(Object.entries(e).forEach((([e,t])=>{Reflect.deleteProperty(q,t),J[e][t]&&!J[e][t].setSlotValue&&J[e][t].destroy(),Reflect.deleteProperty(J[e],t)})),Reflect.deleteProperty(ne,n.id))}Reflect.deleteProperty(a,`${n.id}-${n.frameId}`);const r=`${n.parentComId}-${n.frameId}`,i=ee[r];i&&Object.keys(i).forEach((e=>{Reflect.deleteProperty(Q,`${e}-${n.id}`)})),Reflect.deleteProperty(oe,`${e}-${n.frameId}`)}g.forEach((e=>{Reflect.deleteProperty(Y,e)})),Reflect.deleteProperty(a,u),d=null},_inputs:v,_inputRegs:p,inputs:y,outputs:h,get curScope(){return m.scope},setCurScope(e){m.scope=e},get todo(){return m.todo},pushTodo(e){m.todo||(m.todo=[]),m.todo.push(e)},setSlotValue(t,n){const o=n||m.scope;Object.entries(t).forEach((([t,n])=>{const r=`${e+"-"+c+"-"+t}${o?`-${o.id}-${o.frameId}`:""}`;g.add(r),Y[r]=n}))}},n){(ne[i=n.id.split("-")[0]]||(ne[i]={}))[l]=u}}return d}function ge(e){const{comId:t,frameId:n,scope:o}=e,r=M[t?`${t}-${n}`:`${n}`];r&&r.forEach((e=>{var t;const{id:n,def:r}=e,i=K[n];if(i){const e=de(n,o),s=f(r);if(!s)return void y(a(r));i.global&&"mybricks.core-comlib.var"===r.namespace&&(null===(t=m.scenesOperate)||void 0===t||t.var.regist(i.id,(t=>{e.outputs.changed(t,!0,void 0,!0)}))),s.runtime({env:W,_env:v,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:h,onError:e.onError})}}))}function ye({options:e,value:t,scope:n,log:o=!0,comProps:r}){const{frameId:i,comId:s,pinId:l,sceneId:a}=e,u=N[(s?`${s}-${i}`:`${i}`)+"-"+l];if(Y[`${i}-${l}`]=t,u)le({logProps:["frame",{comId:s,frameId:i,pinHostId:l,val:t,sceneId:a}],cons:u,val:t,curScope:n});else if(o&&ie("frame",{comId:s,frameId:i,pinHostId:l,val:t,sceneId:a}),i!==c)if(p.id===i)H[l](t);else{if(!n)return;null==P||P.open({frameId:i,todo:{pinId:l,value:t},comProps:r,parentScope:n.proxyComProps})}}const he={get({comId:e,slotId:t,slot:n,scope:o,_ioProxy:r}){let i;if(r&&(r.inputs||r.outputs||r._inputs||r._outputs)&&(i=r),t)return n&&(te[`${e}-${t}`]=n),ve(e,n||t,o);{const t=de(e,o);return i?t.clone(i):t}},getComInfo:e=>K[e]};if("function"==typeof g){g({style:null==T?void 0:T.style,run(e=c,t=null){ge({frameId:e,scope:t})},inputs:(0,r.C6)({},{get:(n,o)=>function(n,r=void 0,i=!0,s=c,l=null){var a;if("[object Symbol]"!==Object.prototype.toString.call(o)){if(null===(a=p.inputs)||void 0===a?void 0:a.length){const[r,i]=o.split("&execute&");if(i){const o=D[`${c}-${r}`];if(o){const c=null;return void u(Object.assign(Object.assign({},e),{_getComProps:e=>de(e,c),_getSlotValue:e=>pe(e,c),_getSlotPropsMap:e=>S?S(e):J[e],_getScopeInputTodoMap:()=>k?k():oe,_frameId:s,ref:e=>{const{inputs:t,outputs:s}=e;o.forEach((e=>{s(e,((...t)=>{const n=`${e}&execute&${i}`;H[n](...t),Reflect.deleteProperty(H,n)}))})),t[r](n)}}),t)}}}ye({options:{frameId:s,pinId:o,sceneId:r},value:n,scope:l,log:i})}}}),outputs(e,t){H[e]=t},get:he.get,getComInfo:he.getComInfo})}return he}class d{constructor(){this._varChangeCallBack=new Map,this._valuesTitleMap=new Map}regist(e,t){let n=this._varChangeCallBack.get(e);n||(n=new Set,this._varChangeCallBack.set(e,n)),n.add(t)}destroy(e,t){const n=this._varChangeCallBack.get(e);n&&n.delete(t)}changed(e){const{com:t,value:n}=e,o=t.id;this._valuesTitleMap.set(t.title,n);const r=this._varChangeCallBack.get(o);r&&r.forEach((e=>{e(n)}))}getValueByTitle(e){return this._valuesTitleMap.get(e)}}},713:(e,t,n)=>{"use strict";function o(e,t,n){var o,r;const i=null===(o=null==e?void 0:e.def)||void 0===o?void 0:o.namespace,s=null===(r=null==n?void 0:n[1])||void 0===r?void 0:r.pinHostId;return!(i&&s&&("test.text"===i&&"testOut"===s||"fangzhou.normal-pc.table-blocks"===i&&"rowSelection"===s)&&t.startPinParentKey)}n.d(t,{i:()=>o})},524:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,Ml:()=>c,iI:()=>i,qr:()=>r,sK:()=>s});let o=!1;function r(){o=!0}function i(e,t,n,o){let r;try{r=JSON.stringify(o)}catch(e){r=o}return[`%c 输入 %c ${e||t.title||t.namespace} | ${n} -> ${r}`,"color:#FFF;background:#000","",""]}function s(e,t,n,r){o||console.log(...i(e,t,n,r))}function c(e,t,n,o){let r;try{r=JSON.stringify(o)}catch(e){r=o}return[`%c 输出 %c ${e||t.title||t.namespace} | ${n} -> ${r}`,"color:#FFF;background:#fa6400","",""]}function l(e,t,n,r){o||console.log(...c(e,t,n,r))}},586:(e,t,n)=>{"use strict";n.d(t,{s:()=>b,y:()=>l});var o=n(12),r=n.n(o),i=n(615);const s="__render-web-createElement__";let c;function l(e){const{pxToRem:t,pxToVw:n}=e;r()[s]||(r()[s]=!0,c=r().createElement,r().createElement=function(...e){let[s,l]=e;if(l){const d=l.style;if(t&&d?Object.keys(d).forEach((e=>{const t=d[e];"string"==typeof t&&-1!==t.indexOf("px")&&(d[e]=(0,i.a8)(t))})):n&&d&&Object.keys(d).forEach((e=>{const t=d[e];"string"==typeof t&&-1!==t.indexOf("px")&&(d[e]=n(t))})),l.__no_hijack__)return c(...e);if(e.length>0&&"function"==typeof s){if(!s.prototype||!(s.prototype instanceof r().Component)&&void 0===s.prototype.isReactComponent){const t=function(e,t=!1){let n=e[a];if(!n){t?(n=(0,o.memo)(e),n.render=u(e.render,!1)):n=u(e);try{e[a]=n}catch(e){}}const r=Object.getOwnPropertyNames(e);return r&&r.forEach((o=>{try{t&&"render"===o||(n[o]=e[o])}catch(e){console.error(e)}})),n}(s);e.splice(0,1,t)}return c(...e)}return"object"==typeof s&&(s.$$typeof,Symbol.for("react.forward_ref")),c(...e)}return c(...e)})}const a="__enhanced__";function u(e,t=!0){function n(t,n){const[,r]=(0,o.useState)([]);let i;return(0,o.useEffect)((()=>()=>{m(r)}),[]),f({update:r,run:()=>{i=e(t,n)}}),i}return n.displayName=e.displayName||e.name,t?(0,o.memo)(n):n}let d=0;const p=[],f=({update:e,run:t})=>{p.unshift(e),t();const n=p.indexOf(e);-1!==n&&p.splice(n,1)},m=e=>{g.destroy(e)};let v=/^_ob\d+_/;const g={_obToKey:{},event:{},reverse:new WeakMap,on(e,t,n){const{_obToKey:o,event:r,reverse:i}=this,s=e+t;o[e]||(o[e]=new Set),o[e].add(s),r[s]||(r[s]=new Set),r[s].add(n),i.get(n)||i.set(n,new Set),i.get(n).add(s)},emit(e,t){const n=new WeakSet,o=this.event[e];o&&o.forEach((e=>{n.has(e)||(n.add(e),e(t))}))},destroy(e){const{reverse:t}=this,n=t.get(e);if(n){const{event:o,_obToKey:r}=this;n.forEach((t=>{const n=o[t],i=t.match(v)[0],s=r[i];s&&(s.delete(t),s.size||Reflect.deleteProperty(r,i)),n.delete(e),n.size||Reflect.deleteProperty(o,t)})),t.delete(e)}},destroy2(e){const{_obToKey:t,event:n,reverse:o}=this,r=t[e];r&&(r.forEach((e=>{n[e].forEach((t=>{const n=o.get(t);n&&(n.delete(e),n.size||o.delete(t))})),Reflect.deleteProperty(n,e)})),Reflect.deleteProperty(t,e))}},y=e=>{(null==e?void 0:e._ob)&&(g.destroy2(e._ob),Object.entries(e).forEach((([,e])=>{y(e)})))},h={set(e,t,n,o){const r=Reflect.get(e,t,o),i=Reflect.set(e,t,n,o);return(r!==n||Array.isArray(e)&&"length"===t)&&(g.emit(e._ob+t,[]),y(r)),i},get(e,t,n){const o=Reflect.get(e,t,n);if(["_ob","constructor",Symbol.toPrimitive,Symbol.toStringTag,Symbol.iterator].includes(t))return o;const r=p[0];if(r)if(Reflect.get(e,"__model_style__",n)){if("display"===t)g.on(e._ob,t,r);else if("styleAry"===t)return o}else g.on(e._ob,t,r);if((0,i.Gv)(o)){if(o._ob)return o;{const r=b(o);return Reflect.set(e,t,r,n),r}}return o}};function b(e){return e._ob?e:(Object.defineProperty(e,"_ob",{value:`_ob${++d}_`,enumerable:!1,writable:!1,configurable:!1}),(0,i.C6)(e,h))}},615:(e,t,n)=>{"use strict";function o(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function i(e,t){const n=e.split("."),o=t.split("."),r=n.length,i=o.length,s=Math.min(r,i);let c=0;for(;c<s;c++){let e=parseInt(n[c]),t=parseInt(o[c]);if(e>t)return 1;if(e<t)return-1}if(r>i){for(let e=c;e<r;e++)if(0!=parseInt(n[e]))return 1;return 0}if(r<i){for(let e=c;e<i;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function s(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}n.d(t,{A4:()=>g,BS:()=>p,C6:()=>h,Et:()=>r,Gm:()=>i,Gv:()=>o,RD:()=>c,a8:()=>d,eq:()=>f,iu:()=>m,uR:()=>s,y_:()=>v});const l=function(e,t,n,o){return function(r,i){var s,c,l,a,u=parseFloat(i);return!i||u<=t?r:"".concat((s=u/e,c=n,l=Math.pow(10,c+1),a=Math.floor(s*l),10*Math.round(a/10)/l)).concat(o)}},a=l(12,0,5,"rem"),u=(l(3.75,0,5,"vw"),/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g),d=e=>e.replace(u,a),p=({viewportWidth:e=375,unitPrecision:t=5})=>{const n=l(e/100,0,t,"vw");return e=>e.replace(u,n)};function f(e){return e}function m(){var e;return(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot)||document.head}function v(e,t=[]){const n=Object.prototype.toString.call(e);if(!["[object Object]","[object Array]"].includes(n))return e;const o=t.filter((t=>t.original===e))[0];if(o)return o.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((n=>{r[n]=v(e[n],t)})),r}function g(e,t=[]){const n=Object.prototype.toString.call(e);if(!["[object Object]","[object Array]"].includes(n))return e;const o=t.filter((t=>t.original===e))[0];if(o)return o.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.getOwnPropertyNames(e).forEach((n=>{const o=Object.getOwnPropertyDescriptor(e,n);o&&"function"==typeof o.get?Object.defineProperty(r,n,{get:o.get,enumerable:o.enumerable,configurable:o.configurable}):r[n]=g(e[n],t)})),r}const y="undefined"!=typeof Proxy,h=(e,t)=>{if(y)return new Proxy(e,t);console.log("环境内没有Proxy")}},231:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(12),r=n.n(o);Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler");const i=Symbol.for("react.provider"),s=(Symbol.for("react.context"),Symbol.for("react.forward_ref")),c=(Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo")),l=(Symbol.for("react.lazy"),Symbol.for("react.offscreen"),"data-com-id"),a=(0,o.createContext)({_key:null,_data:null}),u=a.Provider,d=({children:e})=>{if((0,o.isValidElement)(e)){const{type:t}=e;switch(Object.prototype.toString.call(t)){case"[object String]":return r().createElement(v,null,e);case"[object Object]":return r().createElement(g,null,e);case"[object Function]":return r().createElement(_,null,e);case"[object Symbol]":return r().createElement(I,null,e);default:return e}}return e},p=({_data:e,children:t})=>{if(e)return r().createElement(u,{value:{_data:e}},r().createElement(p,null,t));const{_key:n,_data:i}=(0,o.useContext)(a);if(!i)return t;if(Array.isArray(t))return o.Children.map(t,(e=>r().createElement(p,null,e)));if((0,o.isValidElement)(t)){const{props:e}=t,s=e[l];return s?s!==n?r().createElement(u,{value:{_key:s,_data:i}},r().createElement(d,null,t)):r().createElement(d,null,(0,o.cloneElement)(t,{[l]:null})):r().createElement(d,null,t)}return t},f=p,m=({type:e,render:t,next:n})=>{if(e.__airender__){e.__airender__=null;n(e.__ori__),e.__runairender__=!0}else if(!e.__runairender__){n(t),e.__runairender__=!0}},v=({children:e})=>{const{_key:t,_data:n}=(0,o.useContext)(a),{props:i}=e,{children:s}=i;return t?(0,o.cloneElement)(e,{[l]:t,children:s?r().createElement(u,{value:{_key:null,_data:n}},r().createElement(p,null,s)):null}):(0,o.cloneElement)(e,{children:s?r().createElement(p,null,s):null})},g=({children:e})=>{const{type:t}=e;switch(t.$$typeof){case s:return r().createElement(y,null,e);case i:return r().createElement(h,null,e);case c:return r().createElement(b,null,e);default:return e}},y=({children:e})=>{const{props:t,ref:n,type:i}=e,s=t.children;if(s&&"function"==typeof s){const t=s;return(0,o.cloneElement)(e,{children:(...e)=>r().createElement(p,null,t(...e))})}return!i.__airender__&&i.__runairender__||m({type:i,render:i.render,next:e=>{i.render=(...t)=>{const n=e(...t);return r().createElement(p,null,n)}}}),e},h=({children:e})=>{const{props:t}=e,{children:n}=t;return n?(0,o.cloneElement)(e,{children:r().createElement(p,null,n)}):e},b=({children:e})=>{const{type:t,props:n}=e;if("function"==typeof t.type){const e=t.type(n);return r().createElement(p,null,e)}if(t.type.$$typeof===s){const o=t.type.render(n,e.ref);return r().createElement(p,null,o)}return e},_=({children:e})=>{const{type:t,props:n}=e;return t.prototype instanceof o.Component?(!t.__airender__&&t.__runairender__||m({type:t,render:t.prototype.render,next:e=>{t.prototype.render=function(){const t=e.call(this);return r().createElement(p,null,t)}}}),e):r().createElement(p,null,t(n))},I=({children:e})=>{const{props:t}=e,{children:n}=t;return n?(0,o.cloneElement)(e,{children:r().createElement(p,null,n)}):e}},728:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(12),r=n.n(o),i=n(785);const s=n(263).A.locals;class c extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o,r,s;null===(o=null===(n=this.props.options)||void 0===n?void 0:n.errorHandler)||void 0===o||o.call(n,e,t),i.A.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(r=null==e?void 0:e.toString)||void 0===r?void 0:r.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(s=null==t?void 0:t.toString)||void 0===s?void 0:s.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:i}=this.props;return e?r().createElement("div",{className:s.error},r().createElement("div",null,i||"渲染错误"),r().createElement("div",null,t||n)):o}}},426:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var o=n(12),r=n.n(o),i=n(337),s=n(997),c=n(685),l=n(785),a=n(728);function u({json:e,options:t,style:n={},className:u="",root:d=!0,from:p}){const f=(0,i.b2)(),m=(0,i.Jh)(),{env:v,onError:g,logger:y,slot:h,getComDef:b}=(0,o.useMemo)((()=>{const{debug:o}=t,{env:r}=m,i=e.slot;if(!r.canvas.isValid&&!t._isNestedRender&&o&&"scene"===p&&i&&"module"!==i.type&&"module"!==i.showType&&(n.flex=1),"module"===(null==i?void 0:i.showType)||"module"===(null==i?void 0:i.type)){const{style:e}=i;n.hasOwnProperty("height")||(e.heightAuto?n.height="fit-content":e.heightFull?n.height="100%":n.height=e.height),n.hasOwnProperty("width")||(e.widthAuto?n.width="fit-content":e.widthFull?n.width="100%":n.width=e.width),i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"}return"module"===e.type&&(i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"),"2024-diff"===f._v&&(e._v=f._v),{env:r,onError:f.onError,logger:f.logger,getComDef:e=>f.getComDef(e),slot:i,_context:f}}),[]),[_,I,x]=(0,o.useMemo)((()=>{var n;try{let n,o=!0;return[(0,s.A)({json:e,getComDef:b,events:t.events,env:v,ref(r){n=r,"function"==typeof t.ref&&(t.ref(r,e),o=!1)},onError:g,debug:t.debug,debugLogger:t.debugLogger,logger:y,scenesOperate:t.scenesOperate,_env:t._env,_isNestedRender:t._isNestedRender,_isNestCom:t._isNestCom,_isModuleCom:t._isModuleCom,_context:f,rootId:t.rootId},{observable:f.observable}),n,o]}catch(e){throw console.error(e),l.A.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(x){const{inputs:n}=I,o=e.inputs;n&&Array.isArray(o)&&o.forEach((e=>{const{id:o,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}n[o](c)}))}I.run()}}),[]),r().createElement(a.A,{errorTip:"页面渲染错误",options:t},r().createElement(c.A,Object.assign({env:v,style:n,_env:t._env,slot:h,getComDef:b,context:_,className:u,createPortal:t.createPortal||(()=>{}),onError:g,logger:y,root:d,options:t},"module"===e.type?{onClick(){var e;null===(e=t.outputs)||void 0===e||e.click()}}:{})))}},492:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(12),r=n.n(o),i=n(426),s=n(337),c=n(997),l=n(740),a=n(615),u=n(984),d=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((o=o.apply(e,t||[])).next())}))};class p{constructor(e){this.history=[],this.index=-1,"popup"!==e.type&&(this.history[++this.index]={id:e.id,todo:[]})}go(e){this.history=this.history.slice(0,++this.index).concat({id:e,todo:[]})}back(e){const t=this.index-e;return this.index=t<0?0:t,this.history[this.index]}forward(){if(this.history.length>this.index+1)return this.history[++this.index]}redirect(e){this.index>-1&&(this.history=this.history.slice(0,this.index).concat({id:e,todo:[]}))}setTodo(e){this.history[this.index].todo=e}}const f=u.A.locals;function m({json:e,options:t}){const n=(0,s.b2)(),i=(0,s.Jh)(),[l,a]=(0,o.useState)(0),[u,m]=(0,o.useState)([]),[y,h]=(0,o.useState)([]),{scenesMap:b,scenesOperateInputsTodo:_,globalVarMap:I,debugHistory:x,env:w}=(0,o.useMemo)((()=>{var o,r;const{sceneId:s,disableAutoRun:l,globalVariable:u}=t,{env:f}=i;if(s){const t=e.scenes.findIndex((e=>e.id===s));if(-1!==t){const n=e.scenes.splice(t,1);e.scenes.unshift(...n),"popup"===n[0].type&&m([n[0].id])}}const v=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||m([e.id]):v.push(e)})),h(v);const{modules:y,definedComs:b,global:_}=e;f.getDefinedComJSON||(f.getDefinedComJSON=e=>b[e].json),f.getModuleJSON=e=>{var t;return null===(t=null==y?void 0:y[e])||void 0===t?void 0:t.json};const I=e.permissions||[];f.themes=e.themes,f.permissions=I;const w=f.hasPermission;"function"==typeof w&&Object.defineProperty(f,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=I.find((t=>t.id===e));return w({permission:t})}return w(e)}}});const E={},C={};let O;_.fxFrames.forEach((e=>{E[e.id]=e,"extension-bus"===e.type&&(C[e.name]=e),"extension-config"===e.type&&(O=e)}));const j=e.scenes[0],S={lastSceneId:"popup"===j.type?null:j.id};f.canvas.open=(e,n,o,r,i)=>d(this,void 0,void 0,(function*(){var s,c,l,u,d;const p=(null==i?void 0:i.moduleId)?`${null==i?void 0:i.moduleId}-${e}`:e;let v=P[p];if(!v){if("function"!=typeof(null===(s=null==t?void 0:t.module)||void 0===s?void 0:s.loadPage))return void(f.history?f.history.go(p,n,o):console.error(`缺少场景信息: ${p}`));const r=yield t.module.loadPage(Object.assign({pageId:e},i));let l=r;if((null==i?void 0:i.mergeToJson)&&(l=Object.assign(Object.assign({},i.mergeToJson),{scenes:[r]})),r.moduleId=null==i?void 0:i.moduleId,l.moduleId=null==i?void 0:i.moduleId,l.id=r.id,v={disableAutoRun:!1,json:l,show:!1,parentScope:null,todo:[],type:(null===(c=r.slot)||void 0===c?void 0:c.showType)||r.type,useEntryAnimation:!1},P[p]=v,"popup"===r.type||h((e=>[...e,l])),A[p]){const{parentScope:e,todo:t}=A[p];v.parentScope=e,t.forEach((({value:e,pinId:t,parentScope:n})=>{v.todo=v.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}if(null===(l=t.scenesLoaded)||void 0===l||l.call(t,v.json),o?null===(d=t.router)||void 0===d||d.call(t,e,"direct"):null===(u=t.router)||void 0===u||u.call(t,e,"open"),o)if("popup"===o&&(v.disableAutoRun=!1),"none"===o)P[p].show=!0,a((e=>e+1));else{r||("blank"===o?x.go(p):"redirect"===o&&x.redirect(p));const e=P[S.lastSceneId],n=P[p];"blank"===o&&"redirect"!==t.sceneOpenType?n.useEntryAnimation=!0:n.useEntryAnimation=!1,n.show=!0,n.hidden=!1,e&&e.json.id!==n.json.id&&(r?"back"===r?(e.show=!1,e._refs=null,e.alreadyOpened=!1):(e.hidden=!0,e.alreadyOpened=!0):"redirect"===o?(e.show=!1,e._refs=null,e.alreadyOpened=!1):(e.hidden=!0,e.alreadyOpened=!0)),a((e=>e+1)),S.lastSceneId=p}else v.show||(v.show=!0,m((e=>[...e,p])));i&&i.callInputs&&i.callInputs.forEach((({frameId:e,value:t,pinId:n})=>{R.inputs({frameId:e,value:t,pinId:n},Object.assign({moduleId:null==i?void 0:i.moduleId},i))}))})),f.canvas.back=e=>{const t=x.back(Math.abs(e)||1);if(t){const{id:e,todo:n}=t;f.canvas.open(e,null,"blank","back");P[e].todo=n}},f.canvas.forward=()=>{const e=x.forward();if(e){const{id:t,todo:n}=e;f.canvas.open(t,null,"blank","forward");P[t].todo=n}};const k={},A={},P=e.scenes.reduce(((e,t,n)=>{var o;return Object.assign(Object.assign({},e),{[t.id]:{show:0===n,todo:[],json:t,disableAutoRun:!(!l&&!n),useEntryAnimation:!1,type:(null===(o=t.slot)||void 0===o?void 0:o.showType)||t.type,main:0===n}})}),{}),R=Object.assign({open({todo:e,frameId:o,busName:r,parentScope:i,comProps:s},l){var a,u;let d;d=r?C[r]:(null===(a=null==l?void 0:l.getFxFrame)||void 0===a?void 0:a.call(l,o))||E[o],d?(0,c.A)({json:d,getComDef:e=>n.getComDef(e),events:t.events,env:f,ref(t){var n;const{inputs:o,outputs:r}=t;d.outputs.forEach((e=>{r(e.id,(t=>{i.outputs[e.id](t)}))}));const c=null===(n=null==s?void 0:s.data)||void 0===n?void 0:n.configs;c&&Object.entries(c).forEach((([e,t])=>{o[e](t,void 0,!1)})),o[e.pinId](e.value,void 0,!1),t.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:R,_context:n},{observable:n.observable}):null===(u=f.callServiceFx)||void 0===u||u.call(f,o,e.value).then((({id:e,value:t})=>{i.outputs[e](t)}))},inputs({frameId:e,parentScope:t,value:n,pinId:o},r){const i=(null==r?void 0:r.moduleId)?`${null==r?void 0:r.moduleId}-${e}`:e,s=P[i];if(s){if(s.alreadyOpened&&!(null==r?void 0:r.moduleId))return void("open"!==o&&s._refs&&s._refs.inputs[o](n));s.parentScope=t,s._refs?s._refs.inputs[o](n):s.todo=s.todo.concat({type:"inputs",todo:{pinId:o,value:n}})}else A[i]?A[i].todo.push({frameId:i,parentScope:t,value:n,pinId:o}):A[i]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in P){const r=P[o];if(r.json.coms[t])if(r._refs)g(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return u?{data:{val:u.get(t)}}:t in k?{data:{val:k[t]}}:null===(n=P[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;k[o]=t,null==u||u.set(o,t),Object.keys(P).forEach((e=>{const r=P[e];if(r.show&&r._refs){const e=r._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}))},var:new c.g,callExtension({pinId:e,value:o,moduleId:r}){const i=_.fxFrames.find((e=>e.name===r));(0,c.A)({json:i,getComDef:e=>n.getComDef(e),events:t.events,env:f,ref(t){const{inputs:n}=t;n[e](o,void 0,!1),t.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:R,_context:n},{observable:n.observable})}},null===(r=null===(o=t.extend)||void 0===o?void 0:o.env)||void 0===r?void 0:r.scenesOperate);return f.scenesOperate=R,O&&(0,c.A)({json:O,getComDef:e=>n.getComDef(e),events:t.events,env:f,ref(e){const{inputs:n}=e,o=O.inputs;n&&Array.isArray(o)&&o.forEach((e=>{const{id:o,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}n[o](c)})),e.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:R,_context:n},{observable:n.observable}),{scenesMap:P,scenesOperateInputsTodo:A,globalVarMap:k,debugHistory:new p(e.scenes[0]),globalFxIdToFrame:E,env:f}}),[]);(0,o.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=n=>(o,r)=>(n(o,r),e.call(t,o,r))}else t.ref=e=>(t,n)=>{e(t,n)}}),[]);const E=(0,o.useCallback)((e=>{const n=b[e];return Object.assign(Object.assign({},t),{env:w,get disableAutoRun(){return n.disableAutoRun},ref:t.ref((o=>{var r,i,s;o.canvas=w.canvas,n._refs=o;const c=n.todo,{inputs:l,outputs:u}=o,d=n.disableAutoRun;null===(s=n.json.outputs||(null===(i=null===(r=n.json.scenes)||void 0===r?void 0:r[0])||void 0===i?void 0:i.outputs))||void 0===s||s.forEach((t=>{u(t.id,(o=>{var r,i,s;"apply"===t.id?null===(r=n.parentScope)||void 0===r||r.outputs[t.id](o):"module"!==n.type&&d||"popup"===n.type?(n.show=!1,n.todo=[],n._refs=null,null===(i=n.parentScope)||void 0===i||i.outputs[t.id](o),n.parentScope=null,"popup"===n.type?m((t=>t.filter((t=>e!==t)))):a((e=>e+1))):null===(s=n.parentScope)||void 0===s||s.outputs[t.id](o)}))})),c.length?(c.forEach((({type:t,todo:n})=>{if("inputs"===t)Promise.resolve().then((()=>{l[n.pinId](n.value,e)}));else if("globalVar"===t){const{comId:e,value:t,bindings:r}=n;g(o,e,r,t)}})),n.type||x.setTodo(c),n.todo=[]):d||(n.disableAutoRun=!0,Promise.resolve().then((()=>{var e,o,r,i;const s=[];null===(i=null===(r=n.json.inputs||(null===(o=null===(e=n.json.scenes)||void 0===e?void 0:e[0])||void 0===o?void 0:o.inputs))||void 0===r?void 0:r.forEach)||void 0===i||i.call(r,(e=>{const{id:n,mockData:o,type:r,extValues:i}=e;if("ext"===r)return;let c;if(t.debug)if("config"===r&&(null==i?void 0:i.config)&&"defaultValue"in i.config)try{c=JSON.parse(decodeURIComponent(i.config.defaultValue))}catch(e){c=i.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(o))}catch(e){c=o}s.push({type:"inputs",todo:{pinId:n,value:c}}),l[n](c)})),n.type||x.setTodo(s)}))),d&&Promise.resolve().then((()=>{o.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){n.show=!1,n.todo=[],n._refs=null,"popup"===n.type?m((t=>t.filter((t=>e!==t)))):a((e=>e+1))}},destroyAllPopup(){m((e=>(e.forEach((e=>{const t=b[e];t&&(t.show=!1,t.todo=[],t._refs=null)})),[])))}},scenesOperate:w.scenesOperate})}),[]),C=(0,o.useMemo)((()=>y.length?y.map((e=>{const{id:n,moduleId:o}=e,i=o?`${o}-${n}`:n,s=b[i];if(s.show){let o=s.useEntryAnimation?f.main:"",c={};if(s.main){const{className:e,style:n}=t;e&&(o+=` ${e}`),n&&(c=Object.assign(c,n))}return s.hidden&&(c.display="none"),s.show&&r().createElement(v,{key:n,json:Object.assign(Object.assign({},e),{scenesMap:b}),options:E(i),className:o,style:c})}return null})):null),[l,y]),O=(0,o.useMemo)((()=>u.length?u.map((e=>{const n=b[e],o=n.json;let i="",s={position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:999};if(n.main){const{className:e,style:n}=t;e&&(i=e),n&&(s=Object.assign(s,n))}return r().createElement(v,{key:e,json:Object.assign(Object.assign({},o),{scenesMap:b}),options:E(e),style:{position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:999}})})):null),[u]);return(0,o.useEffect)((()=>{n.setPerformanceRender("end",(new Date).getTime())}),[]),r().createElement(r().Fragment,null,C,O)}function v({json:e,options:t,style:n={},className:o=""}){if(e.moduleId){const o=(0,a.A4)(t.env);return r().createElement(l.A,{json:e,style:n,options:Object.assign(Object.assign({},t),{env:o,_isModuleCom:!0})})}return r().createElement(i.A,{json:e,options:t,style:n,className:o,from:"scene"})}function g(e,t,n,o){const r=e.get({comId:t});r&&Array.isArray(n)&&n.forEach((e=>{let t=r;const n=e.split(".");n.forEach(((e,r)=>{r!==n.length-1?t=t[e]:t[e]=o}))}))}},785:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var o=n(12),r=n.n(o),i=n(33),s=n.n(i);const c=n(498).A.locals;let l=!1;var a;!function(e){e.Error="error"}(a||(a={}));const u="__fz-debug-info-container__";let d,p=document.getElementById(u),f=0;const m=({content:e,type:t})=>{const[n,i]=(0,o.useState)([]),s=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),i((t=>[...t,e]))},l=e=>{i((t=>t.filter((t=>t._nid!==e))))};return(0,o.useEffect)((()=>{d={add:s,remove:l},e&&d.add({content:e,type:t})}),[]),r().createElement("div",{className:c.container},n.map((e=>r().createElement("div",{key:e._nid,className:c.itemWrap},r().createElement("div",{className:`${c.item} ${c.errorItem}`},r().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>d.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},v=["ResizeObserver loop limit exceeded"],g={init:e=>{l=!1!==e,l&&(window.onerror=function(e,t,n,o,r){if("string"!=typeof e||!v.includes(e))return!1})},error:e=>{var t;if(l){const n=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof n&&v.includes(n))return;((e,t)=>{let n={content:"",type:t};if("string"==typeof e)n.content=e;else try{n.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}n.content&&(p?null==d||d.add(n):(p=document.createElement("div"),p.setAttribute("id",u),document.body.appendChild(p),s().render(r().createElement(m,{content:n.content,type:n.type}),p)))})(n,a.Error)}}}},740:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,v:()=>l});var o=n(12),r=n.n(o),i=n(997),s=n(426),c=n(337);const l={},a=({json:e,options:t,style:n={}})=>{const a=(0,c.b2)(),{env:u,modules:d}=(0,o.useMemo)((()=>{var n,o,r,s,u,d;let p=t.moduleId,f=t.moduleVersion;p||(Array.isArray(e.scenes)?(p=e.scenes[0].extra.moduleId,f=e.scenes[0].extra.moduleVersion):(p=e.extra.moduleId,f=e.extra.moduleVersion)),l[p]||((null===(r=null===(o=null===(n=t.extend)||void 0===n?void 0:n.env)||void 0===o?void 0:o.scenesOperate)||void 0===r?void 0:r.var)?l[p]=null===(d=null===(u=null===(s=t.extend)||void 0===s?void 0:s.env)||void 0===u?void 0:u.scenesOperate)||void 0===d?void 0:d.var.clone():l[p]=new i.g,a.onCompleteCallBacks.push((()=>{Reflect.deleteProperty(l,p)}))),t.env.scenesOperate.var=l[p],t.env.scenesOperate.getGlobalComProps=e=>({data:{val:l[p].getValueById(e)}}),t.env.scenesOperate.exeGlobalCom=({com:e,value:t})=>{l[p].changed({com:e,value:t})};const m=t.env.scenesOperate;t.env.scenesOperate=Object.assign(Object.assign({},m),{inputs(e){m.inputs(e,{moduleId:p,moduleVersion:f})},open(t){m.open(t,{getFxFrame:t=>e.global.fxFrames.find((e=>e.id===t))})}}),t.scenesOperate=t.env.scenesOperate;const v=t.env.canvas;t.env.canvas=Object.assign(Object.assign({},v),{open:(t,n,o,r,i={})=>{v.open(t,n,o,r,Object.assign(Object.assign({},i),{moduleId:p,moduleVersion:f,mergeToJson:e}))}});const g=t.env.callConnector;g&&(t.env.callConnector=(e,t,n)=>g(e,t,n,{globalVars:new Proxy({},{get:(e,t)=>l[p].getValueByTitle(t)})}));const y=window[`module_${p}`].modules;return t.env.getModuleJSON=e=>y[e],{env:t.env,modules:new c.KV(y)}}),[]);return r().createElement(c.hA,{value:{env:u,modules:d}},r().createElement(s.A,{json:Array.isArray(e.scenes)?e.scenes[0]:e,options:t,style:n,className:"",from:"scene",root:!1}))}},685:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(12),r=n.n(o),i=n(615),s=n(337),c=n(145),l=n(728),a=n(231),u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const d=c.A.locals;function p({com:e,index:t,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:u,_env:d,template:f,onError:v,logger:g,createPortal:y,options:h}){const{id:b,elements:_,style:I}=e;if(_){let e;const{handlePxToVw:m}=h;return m?(e={},Object.entries(I).forEach((([t,n])=>{const o=typeof n;"string"===o&&-1!==n.indexOf("px")?e[t]=m(n):e[t]="number"===o?m(`${n}px`):n}))):e=I,r().createElement("div",{key:b,style:e},_.map((e=>p({com:e,index:t,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:u,_env:d,template:f,onError:v,logger:g,createPortal:y,options:h}))))}{const r=m({com:e,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:u,index:t,_env:d,template:f,onError:v,logger:g,createPortal:y,options:h});return null==r?void 0:r.jsx}}function f({scope:e,root:t,slot:n,style:o={},createPortal:i,className:s,params:c,inputs:l,outputs:a,_inputs:d,_outputs:f,wrapper:v,template:g,env:b,_env:_,getComDef:I,context:x,onError:w,logger:E,options:C,onClick:O}){const{style:j,comAry:S,layoutTemplate:k,showType:A}=n;if("smart"===j.layout&&k){const m=(null==c?void 0:c.style)||{},{rowGap:v,layout:S,position:A,justifyContent:P,flexWrap:R,flexDirection:$,display:T,columnGap:F,alignItems:M}=m,N=u(m,["rowGap","layout","position","justifyContent","flexWrap","flexDirection","display","columnGap","alignItems"]),D=Object.assign(N||{},j);return r().createElement("div",{"data-isslot":"1","data-slot-id":n.id,onClick:O,className:`${h(D)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign(Object.assign({},y(D,!!N,t,"module"===n.type,C)),o),{display:"none"===(null==o?void 0:o.display)?"none":"flex",flexDirection:"column"})},k.map(((t,n)=>p({com:t,index:n,env:b,getComDef:I,context:x,scope:e,inputs:l,outputs:a,_inputs:d,_outputs:f,_env:_,template:g,onError:w,logger:E,createPortal:i,options:C}))))}const P=[];if(S.forEach(((t,n)=>{const o=m({com:t,env:b,getComDef:I,context:x,scope:e,inputs:l,outputs:a,_inputs:d,_outputs:f,index:n,_env:_,template:g,onError:w,logger:E,createPortal:i,options:C});o&&P.push(o)})),"function"==typeof v)return v(P.map((t=>(t.getJsx=({index:n,id:o})=>m({com:Object.assign(Object.assign({},t.com),{dynamicId:o}),env:b,getComDef:I,context:x,scope:e,inputs:l,outputs:a,_inputs:d,_outputs:f,index:n,_env:_,template:g,onError:w,logger:E,createPortal:i,options:C}),t))));{const e=null==c?void 0:c.style,i=Object.assign(j,e||{});return r().createElement("div",{"data-isslot":"1","data-slot-id":n.id,onClick:O,className:`${h(i)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},y(i,!!e||"module"===n.type,t,"module"===n.type,C)),o)},P.map((e=>e.jsx)))}}function m({com:e,env:t,getComDef:n,context:o,scope:i,inputs:s,outputs:c,_inputs:l,_outputs:a,index:u,_env:f,template:m,onError:g,logger:y,createPortal:h,options:b}){var _,I;const{id:x,def:w,name:E,child:C,brother:O,dynamicId:j}=e,S=o.getComInfo(x),{hasPermission:k,permissions:A}=t,P=null===(I=null===(_=null==S?void 0:S.model)||void 0===_?void 0:_.permissions)||void 0===I?void 0:I.id;if(P&&"function"==typeof k){const e=k(P);if(!e||"boolean"!=typeof e&&!e.permission){const t=A.find((e=>e.id===P));return"hintLink"===((null==e?void 0:e.type)||(null==t?void 0:t.register.noPrivilege))?{id:x,name:E,jsx:r().createElement("div",{key:x},r().createElement("a",{href:(null==e?void 0:e.hintLinkUrl)||t.hintLink,target:"_blank",style:{textDecoration:"underline"}},(null==e?void 0:e.hintLinkTitle)||t.register.title)),style:{}}:void 0}}if(n(w)){const _=o.get({comId:x,dynamicId:j,scope:i?Object.assign(Object.assign({},i),{id:j?i.id+"-"+j:i.id,dynamicId:j}):null,_ioProxy:{inputs:s,outputs:c,_inputs:l,_outputs:a}});if(_){const d=x+(i?i.id:"")+u;return{id:x,jsx:r().createElement(v,{key:d,com:e,comInfo:S,index:u,_mybricks_ob:!0,getComDef:n,context:o,scope:i,props:_,env:t,_env:f,template:m,onError:g,logger:y,createPortal:h,options:b},null==O?void 0:O.map(((e,r)=>p({com:e,index:r,env:t,getComDef:n,context:o,scope:i,inputs:s,outputs:c,_inputs:l,_outputs:a,_env:f,template:m,onError:g,logger:y,createPortal:h,options:b}))),C?p({com:C,index:u,env:t,getComDef:n,context:o,scope:i,inputs:s,outputs:c,_inputs:l,_outputs:a,_env:f,template:m,onError:g,logger:y,createPortal:h,options:b}):null),name:E,inputs:_.inputsCallable,style:_.style,com:e}}return{id:x,jsx:r().createElement("div",{className:d.error},"未找到组件(",w.namespace,"@",w.version," - ",x,")定义."),name:E,style:{}}}return{id:x,jsx:r().createElement("div",{className:d.error},"未找到组件(",w.namespace,"@",w.version,")定义."),name:E,style:{}}}function v({com:e,comInfo:t,index:n,props:c,scope:u,template:p,env:f,createPortal:m,_env:v,getComDef:y,context:h,onError:b,logger:_,children:I,options:x}){var w;const E=(0,s.Jh)(),{id:C,def:O,name:j,slots:S={},dynamicId:k}=e,{scopeId:A,data:P,title:R,style:$,inputs:T,outputs:F,_inputs:M,_outputs:N,_notifyBindings:D}=c,{rootId:B}=x,[,L]=(0,o.useState)(!1);(0,o.useMemo)((()=>{const{handlePxToVw:e,debug:t,disableStyleInjection:n,rootId:o,stylization:r,_isNestCom:i}=x,s=o?`${o}-${C}`:C;if(!n&&!r.hasDefaultStyle(s)){r.setDefaultStyle(s);const e=function({env:e,style:t,def:n}){var o;const r=null===(o=null==e?void 0:e.themes)||void 0===o?void 0:o.comThemes;if(!r)return t.styleAry;let i=t.styleAry;const{themesId:s}=t,{namespace:c}=n;if(s)if("_defined"===s);else{const e=r[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===s));t&&(i=t.styleAry)}}else{const e=r[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(i=t.styleAry)}}return i}({env:f,def:O,style:$});Array.isArray(e)&&r.setStyle(s,e,!0,{isDefault:!0}),Reflect.deleteProperty($,"styleAry"),Reflect.deleteProperty($,"themesId")}}),[]);const V=y(O),K=(0,i.C6)(S,{get(e,t){const n=S[t];if(!n)return;let o;u&&(o={id:u.id+"-"+u.frameId+(k?"-"+k:""),frameId:t,parentComId:C,parent:u,dynamicId:k});const i=h.get({comId:C,slotId:t,slot:n,scope:o});return{render(e){const s=null==e?void 0:e.scope;return s&&(o={id:s.id+"-"+s.frameId,frameId:t,parentComId:C,parent:s}),r().createElement(g,{key:null==e?void 0:e.key,props:i,currentScope:o,slotId:t,slot:n,params:e,style:$,onError:b,createPortal:m,parentComId:C,logger:_,env:f,_env:v,scope:u,getComDef:y,context:h,options:x})},get size(){var e,n;return!!(null===(n=null===(e=S[t])||void 0===e?void 0:e.comAry)||void 0===n?void 0:n.length)},_inputs:i._inputs,inputs:i.inputs,outputs:i.outputs}}}),W=(0,o.useMemo)((()=>{if(c.frameId&&c.parentComId){let e=(null==u?void 0:u.parentScope)||u;const t=h.get({comId:c.parentComId,slotId:c.frameId,scope:(null==e?void 0:e.parent)?e:null});if(t)return{get _inputs(){return(0,i.C6)({},{get:(e,n)=>t._inputRegs[n]})}}}}),[]),J=function({style:e,id:t,rootId:n}){const o=[t,d.com];1!==e.flex||e._new||o.push(d.flex);e.heightAuto&&o.push(d.comHeightAuto);return o.join(" ")}({style:$,id:C,rootId:B}),U=function({style:e}){const t={},{width:n,height:o,maxWidth:r,flexX:s,minWidth:c,minHeight:l,rotation:a}=e;(n||s)&&((0,i.Et)(n)?t.width=n+"px":n&&(t.width=n));(0,i.Et)(o)?t.height=o+"px":o&&(t.height=o);r&&(t.maxWidth=r);c&&(t.minWidth=c);l&&(t.minHeight=l);(0,i.Et)(a)&&(t.transform=`rotate(${a}deg)`,t.transformOrigin="center center");return t}({style:$}),q=function({style:e}){const{margin:t,marginTop:n,marginLeft:o,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:l,paddingBottom:a}=e;if(t)return{margin:t};return{marginTop:n,marginLeft:o,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:l,paddingBottom:a}}({style:$}),H={zIndex:$.zIndex};if(["fixed","absolute"].includes($.position)){const{top:e,left:t,right:n,bottom:o}=$;(e||(0,i.Et)(e))&&(H.top=(0,i.Et)(e)?e+"px":e),(o||(0,i.Et)(o))&&(H.bottom=(0,i.Et)(o)?o+"px":o),(t||(0,i.Et)(t))&&(H.left=(0,i.Et)(t)?t+"px":t),(n||(0,i.Et)(n))&&(H.right=(0,i.Et)(n)?n+"px":n),"fixed"===$.position?H.zIndex=1e3:"absolute"===$.position&&(H.zIndex=1)}const z=V.runtime;let G=r().createElement(z,{id:k||C,_id:B?A?`${B}-${A}-${C}`:`${B}-${C}`:A?`${A}-${C}`:C,env:f,_env:v,data:P,name:j,title:R,style:$,inputs:T,outputs:F,_inputs:M,_outputs:N,_notifyBindings:D,slots:K,createPortal:m,parentSlot:W,onError:b,logger:_,_onError_:e=>{throw new Error(e)},modules:E.modules});return(null===(w=null==t?void 0:t.model)||void 0===w?void 0:w.isAICode)&&(G=r().createElement(a.A,{_data:P},G)),(0,o.useLayoutEffect)((()=>{L(!0)}),[]),"function"==typeof p&&(G=p({id:C,jsx:G,name:j,scope:u,index:n})),G=G?r().createElement("div",{id:C,key:C,"data-title":R,"data-namespace":O.namespace,"data-nested-id":B?A?`${B}-${A}-${C}`:`${B}-${C}`:A?`${A}-${C}`:C,style:Object.assign(Object.assign(Object.assign(Object.assign({display:$.display,visibility:$.visibility,position:$.position,flex:$.flex,flexDirection:$.flexDirection,flexShrink:$.flexShrink},H),U),q),$.ext||{}),className:J},r().createElement(l.A,{errorTip:`组件 (namespace = ${O.namespace}@${O.version}）渲染错误`,options:x},G,I)):null,G}function g({slotId:e,parentComId:t,props:n,currentScope:s,slot:c,params:l,scope:a,env:u,createPortal:d,_env:p,style:m,getComDef:v,context:g,onError:y,logger:h,options:b}){const _=(0,o.useRef)(null),{curScope:I,curProps:x,isRuntime:w}=(0,o.useMemo)((()=>{const o=!u.edit;let r=s,a=n,d=!1;if(r||"scope"===(null==c?void 0:c.type)&&(r={id:(0,i.uR)(10,16),frameId:e,parentComId:t},d=!0),l){const n=l.inputValues;if("object"==typeof n&&(d||(r=Object.assign(Object.assign({},r),{id:r.id+"-"+(0,i.uR)(10,16),parentScope:r})),a=g.get({comId:t,slotId:e,scope:r}),o)){a.setSlotValue(n);for(let e in n)a.inputs[e](n[e],r)}}return a.run(r),{curScope:r,curProps:a,isRuntime:o}}),[]);(0,o.useEffect)((()=>{if(w){const e=null==l?void 0:l.inputValues;if(e)if(_.current){if("object"==typeof e&&JSON.stringify(_.current)!==JSON.stringify(e)){_.current=e,x.setSlotValue(e);for(let t in e)x.inputs[t](e[t],I);x.run()}}else _.current=e,x.run(null,!0);else x.run(null,!0)}}),[null==l?void 0:l.inputValues]),(0,o.useEffect)((()=>()=>{x.destroy()}),[]);return(0,o.useMemo)((()=>r().createElement(f,{scope:I,env:u,createPortal:d,_env:p,slot:c,params:l,wrapper:null==l?void 0:l.wrap,template:null==l?void 0:l.itemWrap,getComDef:v,context:g,inputs:null==l?void 0:l.inputs,outputs:null==l?void 0:l.outputs,_inputs:null==l?void 0:l._inputs,_outputs:null==l?void 0:l._outputs,onError:y,logger:h,options:b})),[])}function y(e,t,n,o,r){const{handlePxToVw:i}=r,{paddingLeft:s,paddingTop:c,paddingRight:l,paddingBottom:a,background:d,backgroundColor:p,backgroundImage:f,backgroundPosition:m,backgroundRepeat:v,backgroundSize:g,position:y,rowGap:h,columnGap:b,borderBottomColor:_,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:w,borderBottomWidth:E,borderLeftColor:C,borderLeftStyle:O,borderLeftWidth:j,borderRightColor:S,borderRightStyle:k,borderRightWidth:A,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:$,borderTopStyle:T,borderTopWidth:F,boxShadow:M,top:N,left:D,marginLeft:B,marginTop:L,marginRight:V,marginBottom:K,overflowX:W,overflowY:J,height:U,heightAuto:q,heightFull:H,width:z,widthAuto:G,widthFull:X}=e,Y=u(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","position","rowGap","columnGap","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","boxShadow","top","left","marginLeft","marginTop","marginRight","marginBottom","overflowX","overflowY","height","heightAuto","heightFull","width","widthAuto","widthFull"]);let Z={rowGap:h,columnGap:b,paddingLeft:s||0,paddingTop:c||0,paddingRight:l||0,paddingBottom:a||0,backgroundColor:p||(n?"#ffffff":void 0),backgroundImage:f,backgroundPosition:m,backgroundRepeat:v,backgroundSize:g,borderBottomColor:_,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:w,borderBottomWidth:E,borderLeftColor:C,borderLeftStyle:O,borderLeftWidth:j,borderRightColor:S,borderRightStyle:k,borderRightWidth:A,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:$,borderTopStyle:T,borderTopWidth:F,boxShadow:M,overflowX:W,overflowY:J};if(d){if("object"==typeof d){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:r}=d;Z.backgroundRepeat=o,Z.backgroundSize=r,e?Z.background=e:(Z.backgroundImage=t,Z.backgroundColor=n)}else Z.background=d}return o&&(Z.height=q?"fit-content":H?"100%":U,Z.width=G?"fit-content":X?"100%":z),t&&(Z=Object.assign(Z,Y)),i&&Object.entries(Z).forEach((([e,t])=>{const n=typeof t;"string"===n&&-1!==t.indexOf("px")?Z[e]=i(t):Z[e]="number"===n?i(`${t}px`):t})),Z}function h(e){var t,n;const o=[d.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(d.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(d.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(d.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(d.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(d.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(d.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(d.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?o.push(d.alignItemsFlexStart):"CENTER"===i.toUpperCase()?o.push(d.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&o.push(d.alignItemsFlexFlexEnd))}return o.join(" ")}},337:(e,t,n)=>{"use strict";n.d(t,{Jh:()=>$,KV:()=>F,XX:()=>T,b2:()=>A,hA:()=>R,yY:()=>d.y});var o=n(12),r=n.n(o),i=n(33),s=n.n(i),c=n(426),l=n(330),a=n(492),u=n(858),d=n(586),p=n(145),f=n(984),m=n(263),v=n(498),g=n(524),y=n(785),h=n(997),b=n(615),_=n(199),I=n.n(_),x=n(740),w=n(244);n(883);function E(e,t){e.use({target:t})}console.log(`%c ${l.UU} %c@${l.rE}`,"color:#FFF;background:#fa6400","","");const C={comRef:e=>e,comDef:e=>e,renderCom:(e,t={})=>{const{props:n={}}=t;return r().createElement(e,Object.assign({},n))}};class O{constructor(e,t){this.options=e,this.performance={render:{start:window.MYBRICKS_PC_FMP_START||(new Date).getTime(),end:null,time:null},callConnectorTimes:[]},this.onCompleteCallBacks=[],this.comDefs={},this.observable=d.s;const{errorHandler:n}=e;this.onError=(e,t)=>{console.error(e),y.A.error(e),t&&(null==n||n(e,t))},this._v=t._v;const{env:o,debug:i,observable:s,onError:c,plugins:l=[],rootId:a}=e,{onCompleteCallBacks:g}=this;o.runtime||(o.runtime={onComplete(e){i&&g.push(e)}}),o.mybricksSdk&&!o.runtime||o.mybricksSdk===C||(o.mybricksSdk=C);const h=(0,b.iu)();let _;e.stylization=new j({rootId:a,root:h,options:e,onCompleteCallBacks:g}),this.mode=i?"development":"production";const I=null==e?void 0:e.pxToVw;I?(_=(0,b.BS)(I),e.handlePxToVw=_,o.pxToVw=_):o.pxToVw=e=>e;const O=null==o?void 0:o.pxToRem;if(O){const{enableAdaptive:e=!1,landscapeWidth:t=1440}=O,n=document.documentElement;if(e){const e=()=>{n.style.fontSize=n.clientWidth/(t/12)+"px"};e(),window.addEventListener("resize",e)}else n.style.fontSize="12px"}if(s?this.observable=s:(0,d.y)({pxToRem:o.pxToRem,pxToVw:_}),(t.scenes||t.slot)&&(E(p.A,h),E(f.A,h),E(m.A,h),E(v.A,h)),o.i18n||(o.i18n=e=>e),o.renderModuleComponent||(o.renderModuleComponent=(t,n)=>{const o=(0,b.A4)(e.env);return r().createElement(x.A,{json:t,options:Object.assign(Object.assign(Object.assign({},e),n),{_isModuleCom:!0,env:o})})}),o.renderModuleJs||(o.renderModuleJs=(t,n)=>{const o=(0,b.A4)(e.env);return(0,w.A)({json:t,options:Object.assign(Object.assign(Object.assign({},e),n),{env:o}),_context:this})}),o.renderModule=(t,n)=>{const r=e.rootId,i=n.rootId;let s=r||i;return r&&i&&(s=r+"_"+i),T(t,Object.assign(Object.assign(Object.assign({},e),n),{rootId:s,env:o,_isNestedRender:!0,_context:this}))},o.renderCom){const t=o.renderCom;o.renderCom=(n,o)=>{const r=e.rootId,i=o.rootId;let s=r||i;return r&&i&&(s=r+"_"+i),t(n,Object.assign(Object.assign(Object.assign({},e),o),{rootId:s,_isNestedRender:!0,_isNestCom:!0,_context:this}))}}else o.renderCom=(t,n)=>{const o=e.rootId,r=n.rootId;let i=o||r;return o&&r&&(i=o+"_"+r),T(t,Object.assign(Object.assign(Object.assign({},e),n),{rootId:i,_isNestedRender:!0,_isNestCom:!0,_context:this}))};const S=document.body;o.canvas||(o.canvas={get type(){return S.clientWidth<=414?"mobile":"pc"}}),o.canvas.css||(o.canvas.css={set:(e,t)=>{const n=document.getElementById(e);if(n)return void(n.innerText=t);const o=document.createElement("style");o.id=e,o.innerText=t,document.head.appendChild(o)},remove:e=>{}}),"canvasElement"in o||(o.canvasElement=S);window.RENDER_WEB_PERFORMANCE={getPerformance:this.getPerformance.bind(this)},this.initOther(),this.initComdefs();[new u.A].concat(l).forEach((e=>{e.apply(this)}))}initOther(){const{env:e}=this.options;e.silent&&(localStorage.getItem("MYBRICKS_LOG")||(0,g.qr)()),y.A.init(e.showErrorNotification),this.logger=this.options.comLogger||{info:console.info,trace:console.trace,warn:console.warn,error:e=>{console.error(e),y.A.error(e)}}}initComdefs(){const e=(t,n)=>{t.forEach((t=>{t.comAray?e(t.comAray,n):n[`${t.namespace}-${t.version}`]=t}))},{comDefs:t}=this.options,{comDefs:n}=this;t&&Object.assign(n,t);let o=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];o.push(I()),o.forEach((t=>{const o=t.comAray;o&&Array.isArray(o)&&e(o,n)}))}getComDef(e){const{comDefs:t}=this,n=t[e.namespace+"-"+e.version]||t[e.namespace];if(!n){const n=[];for(let o in t)o.startsWith(e.namespace+"-")&&n.push(t[o]);if(n&&n.length>0){n.sort(((e,t)=>(0,b.Gm)(e.version,t.version)));const t=n[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`),null}return n}getPerformance(){return this.performance}setPerformanceRender(e,t){const n=this.performance.render;n[e]=t,"end"===e&&(n.time=t-n.start)}setPerformanceCallConnectorTimes(e){this.performance.callConnectorTimes.push(e)}}class j{constructor({rootId:e,root:t,options:n,onCompleteCallBacks:o}){this._defaultStyleMap={},this._cssMap={},this.root=t,this.rootId=e,this.options=n;const{_cssMap:r}=this;o.push((()=>{Object.entries(r).forEach((([e,n])=>{t.removeChild(n.tag)}))}))}hasDefaultStyle(e){return this._defaultStyleMap[e]}setDefaultStyle(e){this._defaultStyleMap[e]=!0}setStyle(e,t,n=!1,o={isDefault:!1}){const{isDefault:r}=o;let i=[];Array.isArray(t)?i=t:Object.entries(t).forEach((([e,t])=>{i.push({selector:e,css:t})}));const s=e.split("-"),c=s[s.length-1];if(i.length){const{root:t,options:o}=this,{env:s,handlePxToVw:l,debug:a}=o,{pxToRem:u}=s,d=a?"#_geoview-wrapper_ ":"",p={};i.forEach((({css:t,selector:n,global:o})=>{":root"===n&&(n="> *:first-child"),(Array.isArray(n)?n:[n]).forEach((n=>{const i=r?`${d}${o?"":`#${c} `}${n.replace(/\{id\}/g,`${c}`)}`:`${d}${o?"":`#${c}[data-nested-id="${e}"] `}${n.replace(/\{id\}/g,`${c}`)}`,s={};Object.entries(t).forEach((([e,t])=>{u&&"string"==typeof t&&-1!==t.indexOf("px")?t=(0,b.a8)(t):l&&"string"==typeof t&&-1!==t.indexOf("px")&&(t=l(t)),s[(0,b.RD)(e)]=t})),p[i]?p[i]=Object.assign(p[i],s):p[i]=s}))}));const f=this._cssMap[e];if(f){const{tag:e,css:t}=f;Object.entries(p).forEach((([e,o])=>{if(t[e]){const r=t[e];Object.entries(o).forEach((([e,t])=>{n&&r[e]||(r[e]=t)}))}else t[e]=o}));let o="";Object.entries(t).forEach((([e,t])=>{o+=`${e} {${Object.entries(t).map((([e,t])=>`${e}: ${t};`)).join("")}}`})),e.innerHTML=o}else{const n=document.createElement("style");this._cssMap[e]={tag:n,css:p},t.appendChild(n);let o="";Object.entries(p).forEach((([e,t])=>{o+=`${e} {${Object.entries(t).map((([e,t])=>`${e}: ${t};`)).join("")}}`})),n.innerHTML=o}}}}const S=(0,o.createContext)({});function k({children:e,value:t}){return(0,o.useEffect)((()=>()=>{t.onCompleteCallBacks.forEach((e=>{e()}))}),[]),r().createElement(S.Provider,{value:t},e)}function A(){return(0,o.useContext)(S)}const P=(0,o.createContext)({});function R({children:e,value:t}){return r().createElement(P.Provider,{value:t},e)}function $(){return(0,o.useContext)(P)}function T(e,t){var n;t.moduleId&&(t.env.edit=!0);let o=e;if(t.sceneOpenType||(t.sceneOpenType="redirect"),t.env.edit||null===(n=t.env.runtime)||void 0===n||n.debug,o){let e,n=null;if("scenes"in o?n=r().createElement(a.A,{key:t.reRenderKey,json:o,options:t}):o.slot&&(t.env.edit&&o.type,n=r().createElement(c.A,{json:o,options:t,root:"module"!==o.type})),!n){const e=t._isNestedRender?t._context:new O(Object.assign(Object.assign({},t),{observable:e=>e}),o);return(0,h.A)({json:o,getComDef:t=>e.getComDef(t),events:t.events,env:t.env,ref(e){if("function"==typeof t.ref)t.ref(e);else{const{inputs:n}=e,r=o.inputs;n&&Array.isArray(r)&&r.forEach((e=>{const{id:o,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}n[o](c)})),e.run()}},onError:e.onError,debug:t.debug,debugLogger:t.debugLogger,logger:e.logger,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_isNestCom:t._isNestCom,_context:e},{observable:e.observable}),null}if(t._isNestCom){const e=(0,b.A4)(t.env);let i;const s=o.modules;s&&(i=new F(s)),n=r().createElement(R,{value:{env:e,modules:i}},n)}if(t._isNestedRender)return n;const i=o.modules;return i&&(e=new F(i)),"scenes"in o||"module"!==o.type||(t.env.edit=null,t.env.ENABLE_MODULE_EDIT&&(t.env.edit=!0)),r().createElement(k,{value:new O(t,o)},r().createElement(R,{value:{env:t.env,modules:e}},n))}return null}class F{constructor(e){this._jsons=e,this._isReact18=!!s().createRoot,this._renderMap={}}get(e){const{_renderMap:t,_jsons:n,_isReact18:i}=this;return{render(){const c=A(),l=$(),a=(0,o.useRef)();return(0,o.useLayoutEffect)((()=>{const o=t[e];if(o)a.current.appendChild(o);else{const o=document.createElement("div");o.style.width="100%",o.style.height="100%";const u=n[e].json,d=r().createElement(k,{value:c},r().createElement(R,{value:l},l.env.renderModule(u,{})));if(i){s().createRoot(o).render(d)}else s().render(d,o);t[e]=o,a.current.appendChild(o)}}),[]),r().createElement("div",{ref:a,style:{height:"100%",width:"100%"}})}}}}},858:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var o=n(12),r=n.n(o),i=n(33),s=n.n(i),c=n(615),l=n(913);const a=l.A.locals,u=r().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},r().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function d({resume:e}){return r().createElement("div",{className:a.debugger},r().createElement("div",{className:a.titlebar},r().createElement("div",null,"已在交互视图中暂停"),r().createElement("div",{className:a.resume,onClick:e},u)))}class p{constructor(){}apply(e){const{options:t,mode:n}=e,{env:o,debug:r,onError:i}=t;if("development"===n&&"function"==typeof r){const n=new f(o),{log:s,onResume:a}=r({resume:()=>{n.next()},ignoreAll:e=>{n.setIgnoreWait(e),e&&n.next(!0)}});n.setResume(a),e.debuggerPanel=n,t.debugLogger=s,e.onError=i,l.A.use({target:(0,c.iu)()})}}}class f{constructor(e){this.env=e,this.isReact18=!!s().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={}}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=s().createRoot(e);t.render(r().createElement(d,{resume:this.resume})),this.root=t}else s().render(r().createElement(d,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():s().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((n=>{if(this._ignoreWait)n();else{const o=this._waitBreakpointIds.length>0;if(o||t(),this.open(),this._pending=!0,e.isBreakpoint){if(o){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const r=this._waitCount+++e.id;this._waitBreakpointIds.unshift(r),this._waitIdToResolvesMap[r]=[n]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(n)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},244:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(997),r=n(740);const i=({json:e,options:t,_context:n})=>{var i,s,c,l,a,u;let d=t.moduleId,p=t.moduleVersion;d||(Array.isArray(e.scenes)?(d=e.scenes[0].extra.moduleId,p=e.scenes[0].extra.moduleVersion):(d=e.extra.moduleId,p=e.extra.moduleVersion)),r.v[d]||((null===(c=null===(s=null===(i=t.extend)||void 0===i?void 0:i.env)||void 0===s?void 0:s.scenesOperate)||void 0===c?void 0:c.var)?r.v[d]=null===(u=null===(a=null===(l=t.extend)||void 0===l?void 0:l.env)||void 0===a?void 0:a.scenesOperate)||void 0===u?void 0:u.var.clone():r.v[d]=new o.g,n.onCompleteCallBacks.push((()=>{Reflect.deleteProperty(r.v,d)}))),t.env.scenesOperate.var=r.v[d],t.env.scenesOperate.getGlobalComProps=e=>({data:{val:r.v[d].getValueById(e)}}),t.env.scenesOperate.exeGlobalCom=({com:e,value:t})=>{r.v[d].changed({com:e,value:t})};const f=t.env.scenesOperate;t.env.scenesOperate=Object.assign(Object.assign({},f),{inputs(e){f.inputs(e,{moduleId:d,moduleVersion:p})},open(t){f.open(t,{getFxFrame:t=>e.global.fxFrames.find((e=>e.id===t))})}}),t.scenesOperate=t.env.scenesOperate;const m=t.env.canvas;t.env.canvas=Object.assign(Object.assign({},m),{open:(t,n,o,r,i={})=>{m.open(t,n,o,r,Object.assign(Object.assign({},i),{moduleId:d,moduleVersion:p,mergeToJson:e}))}}),(0,o.A)({json:e.scenes[0],getComDef:e=>n.getComDef(e),events:t.events,env:t.env,ref(n){if("function"==typeof t.ref)t.ref(n);else{const{inputs:o}=n,r=e.inputs;o&&Array.isArray(r)&&r.forEach((e=>{const{id:n,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}o[n](c)})),n.run()}},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_isNestCom:t._isNestCom,_isModuleCom:!0,_context:n},{observable:n.observable})}},883:(e,t,n)=>{"use strict";n(240),n(116)},116:(e,t,n)=>{"use strict"},932:(e,t,n)=>{"use strict";n(915),n(108),n(110)},110:(e,t,n)=>{"use strict";n(932)},719:(e,t,n)=>{"use strict";n(932)},108:(e,t,n)=>{"use strict";n(915)},915:(e,t,n)=>{"use strict";n(932)},240:(e,t,n)=>{"use strict";n(719)},12:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__12__},33:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__33__},330:e=>{"use strict";e.exports=JSON.parse('{"UU":"@mybricks/render-web","rE":"1.3.58"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{hijackReactcreateElement:()=>e.yY,render:()=>e.XX});var e=__webpack_require__(337)})(),__webpack_exports__})()));